<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Haes&#39; Blog">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;page&#x2F;2&#x2F;index.html">
<meta property="og:site_name" content="Haes&#39; Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Little Haes">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Haes' Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Haes' Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/smallhaes" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/21/Markov-Chain-Monte-Carlo-%E5%92%8C-Gibbs-Sampling%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/21/Markov-Chain-Monte-Carlo-%E5%92%8C-Gibbs-Sampling%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">Markov Chain Monte Carlo 和 Gibbs Sampling算法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-21 22:19:08" itemprop="dateCreated datePublished" datetime="2018-03-21T22:19:08+08:00">2018-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="蒙特卡洛模拟"><a href="#蒙特卡洛模拟" class="headerlink" title="蒙特卡洛模拟"></a>蒙特卡洛模拟</h2><p>蒙特卡洛模拟(Monte Carlo Simulation)是随机模拟的别名,关于随机模拟的一个重要的问题就是:给定一个概率分布p(x),如何生成它的样本?<br>一般而言,均匀分布Uniform(0,1)的样本容易生成,而常见的概率分布(连续或离散)都可以基于均匀分布的样本生成,例如正态分布可以通过Box-Muller变换得到.<br>但是像p(x,y,z)这样甚至更高维度分布的样本很难生成,而MCMC(Markov Chain Monte Carlo)和Gibbs Sampling算法就是解决这个问题的.让我们从马尔科夫链(Markov Chain)说起</p>
<h2 id="马尔科夫链"><a href="#马尔科夫链" class="headerlink" title="马尔科夫链"></a>马尔科夫链</h2><p>马尔科夫链(Markov Chain),简称马氏链,</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义:"></a>定义:</h3><p><img src="https://upload-images.jianshu.io/upload_images/9608551-d800449f0a70e49c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="1.png"><br><strong>含义:当前所处状态只和前一个状态有直接联系</strong></p>
<h3 id="非周期马氏链的引出"><a href="#非周期马氏链的引出" class="headerlink" title="非周期马氏链的引出"></a>非周期马氏链的引出</h3><ul>
<li>对于一个有限状态马氏链,如果状态i是经过有限步转移后迟早要返回的状态,则称状态i是常返态.(即若i→j,则j→i;换句话说,从i能到j,一定可以从j到i,i是常返态,j也是常返态;常返态’链’上的状态是常返态),不是常返态的状态称为过渡态(如果k是过渡态,则从k出发后无法再回到k)  </li>
<li>如果马氏链中任何两个状态互通(互通的两个状态是常返态),则称马氏链为不可约的</li>
<li>一个有限马氏链按照互通关系所分成的子集中的状态要么是常返的,称为常返类;要么是过渡的,称为过度类.</li>
<li>一个有限马氏链至少有一个常返类和若干个过渡类(对于每一个状态都有入边和出边,所以至少有一个常返类)<br><img src="https://upload-images.jianshu.io/upload_images/9608551-ae96971de2d048ad.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="3.png"><br>对于非周期马氏链来说,对于它的任意状态i,从状态i出发,可以有非负条路径返回i,在每条路径走过的步数为 (path1,path2,…), 这些path之间的最大公约数是1. eg:(path1=5,path2=9,path3=10)<h3 id="马氏链的收敛定理"><a href="#马氏链的收敛定理" class="headerlink" title="马氏链的收敛定理"></a>马氏链的收敛定理</h3><img src="https://upload-images.jianshu.io/upload_images/9608551-a9c6e71ca89fa250.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="2.png"><br>对于2.和3.两条:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-f34c6331e96fa56d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="2.1.png"><br>这个定理非常重要,<strong>所有的MCMC方法都是建立在这个定理基础上的</strong>(定理的证明非常麻烦,书上也没有给出)  </li>
</ul>
<p><strong>马氏链的任何两个状态相通的含义是:存在一个n,使得P^n的任意元素大于零</strong><br><strong>由马氏链的收敛定理,我们可以这样做,从马氏链的某个状态出发,按照转移概率矩阵转移,假设第n步后马氏链收敛,则在第n+1步,n+2步…n+j步…所处的状态就是马氏链平稳分布π的样本</strong></p>
<h2 id="Metropolis-Hastings算法"><a href="#Metropolis-Hastings算法" class="headerlink" title="Metropolis-Hastings算法"></a>Metropolis-Hastings算法</h2><p>虽然马氏链能收敛,但是收敛后的分布不一定是我们想要的,如果让收敛后的分布就是我们希望的分布呢?<br>马尔科夫链蒙特卡洛方法(MCMC:Markov Chain Monte Carlo)方法就是解决这一问题的<br>马尔科夫链蒙特卡洛方法被评为二十世纪的十大算法之一  </p>
<p>下面介绍原版算法的改进算法:Metropolis-Hastings算法:<br>Metropolis-Hastings算法是一种马尔科夫蒙特卡洛（MCMC）方法，用于在难以直接采样时从某一概率分布中抽取随机样本序列。得到的序列可用于估计该概率分布或计算积分（如期望值）等。<strong>Metropolis-Hastings算法一般用于从多变量（尤其是高维）分布中采样</strong><br>主要使用如下定理:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-d145bdc6023a18db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="4.png"><br>细致平稳条件的直观理解:开始位于状态i,从状态i跳转到状态j的概率等于开始位于状态j,从状态j跳转到状态i的概率<br><strong>细致平稳条件只是马尔科夫链收敛的充分条件，不是必要条件</strong><br>一般而言,马氏链对应的概率转移矩阵P不满足细致平稳条件,可以构造出满足细致平稳条件的等式:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-bae47b5bd5c992f4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="5.png"><br><strong>α(i,j)称为接受率,表示接受从状态i转移到状态j的概率</strong><br><img src="https://upload-images.jianshu.io/upload_images/9608551-1aca61c85e7fd219.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="6.png"><br>但是,α(i,j)或者α(j,i)往往很小,接受转移的概率小会使采样的次数过多,遍历马氏链所有的状态需要非常长的时间,进而导致样本收敛到平稳分布需要非常长的时间<br>可以把构造出的细致平稳等式两边同时放大一下,将α(i,j),α(j,i)中较大的那个扩成1,也即:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-2f4be23ebd94fcb9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="7.png"><br>这个式子是说,当α(i,j)是较大的那一个则取1,当α(i,j)是较小的那一个则取另一个</p>
<h2 id="Metropolis-Hastings算法采样流程"><a href="#Metropolis-Hastings算法采样流程" class="headerlink" title="Metropolis-Hastings算法采样流程"></a>Metropolis-Hastings算法采样流程</h2><p>(from Wikipedia)<br><strong>其中:</strong><br>A(x’|x)即上面说的接受率α(i,j)=α(x_t+1=j|x_t=i)<br>g(x’|x_t)即上面说的P_ij=P(x_t+1=j|x_t=i)  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/9608551-6412b7a12dce1d8f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="8.png"><br><strong>每次从分布g(x’|x_t)中随机产生一个状态x’,再从Uniform(0,1)中随机产生一个数u,如果u大于接受率A(x’|x),认为t+1时刻的状态为x’,即x_(t+1)=x’</strong><br><strong>采样流程中并没有给出具体的g(x’|x_t)分布也没有给出迭代次数,这些都是自己调整的,比如可以使用高斯分布或者其他方便产生样本的分布</strong>  </p>
<h2 id="Gibbs-Sampling"><a href="#Gibbs-Sampling" class="headerlink" title="Gibbs Sampling"></a>Gibbs Sampling</h2><p>吉布斯采样(Gibbs Sampling)<br>吉布斯采样是MCMC的一种,用于获得样本序列,这个样本序列构成了马尔科夫链,每个样本之间是相关的,不是独立的!当样本构成的马氏链收敛后,马氏链的平稳分布便能拟合含有多个多变量的分布,比如近似一个很难直接采样的联合概率分布,前提是<strong>得知道每个变量的条件概率</strong><br>吉布斯采样是一种随机算法(使用随机数),常用于贝叶斯推理(因为贝叶斯网络含有条件概率的集合),作为随机算法,它是用于统计推理的确定性算法(如EM算法:expectation-maximization algorithm)的一种替代方法<br>再回到之前Metropolis-Hastings算法,由于有接受率的存在,并不能保证每次的采样结果都被接收,所以会导致收敛前采样次数的增加,而吉布斯采样就能保证每次采样的结果可以使用.</p>
<h2 id="吉布斯采样流程"><a href="#吉布斯采样流程" class="headerlink" title="吉布斯采样流程"></a>吉布斯采样流程</h2><p><img src="https://upload-images.jianshu.io/upload_images/9608551-4321f2e89f9226d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="9.png">  </p>
<p>注意事项: </p>
<ol>
<li>初始化的值可以随机给定,或者根据EM算法给定</li>
<li>实际上没有必要着重处理初始值,因为一般都是直接忽略前面的样本的(叫作:burn-in period),毕竟需要跳转足够多的次数后马氏链才收敛, </li>
<li>联合分布的参数通过将k个样本的参数平均后近似</li>
<li>举个例子:直接忽略前1000个样本,之后每100个样本拿出一个,比如取出第1100,1200,1300,….2000个样本做平均,因为连续采出的样本不独立</li>
<li>在采样的早期,常用模拟退火来减少随机游走行为 (i.e. the tendency to move slowly around the sample space, with a high amount of autocorrelation between samples, rather than moving around quickly, as is desired). </li>
</ol>
<p>参考:<br>靳志辉,LDA数学八卦<br>田宝玉,信息论基础</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/20/Dirichlet-Multinomial-%E5%85%B1%E8%BD%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/20/Dirichlet-Multinomial-%E5%85%B1%E8%BD%AD/" class="post-title-link" itemprop="url">Dirichlet Multinomial 共轭</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-20 18:23:34" itemprop="dateCreated datePublished" datetime="2018-03-20T18:23:34+08:00">2018-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>作为LDA的预备知识,Dirichlet Multinomial共轭结构很重要,在介绍这个共轭结构之前,先介绍一下将会用到的相关概念</p>
<h2 id="Gamma-函数"><a href="#Gamma-函数" class="headerlink" title="Gamma 函数"></a>Gamma 函数</h2><p>Gamma函数定义:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-19dd3611014b4449.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="1.png"><br>分部积分后可得:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-022c964076a451d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="2.png"><br>不断展开等式右边,进而有:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-bfd9604547712884.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="3.png"><br>Bohr-Mullerup定理:<br>如果f:(0,∞)→(0,∞),且满足:f(1)=1;f(x+1)=xf(x);log(f(x))是凸函数,那么唯一满足以上条件的就是Γ(x)<br>Gamma函数图像(from Wikipedia):<br><img src="https://upload-images.jianshu.io/upload_images/9608551-d671cdb6cc29bbf9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="4.png"><br>复平面上的Gamma函数(from Wikipedia):<br><img src="https://upload-images.jianshu.io/upload_images/9608551-a4a7785ecc0badbc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="5.png"><br>如下函数被称为Digamma函数:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-714da680527edbb7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="6.png"><br>这是个很重要的函数,在求Dirichlet分布相关的参数的极大似然估计时往往用到该函数<br>Digamma函数具有如下性质<br><img src="https://upload-images.jianshu.io/upload_images/9608551-a69cc5479512a4dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="7.png"></p>
<h2 id="Beta-Binomial-共轭"><a href="#Beta-Binomial-共轭" class="headerlink" title="Beta Binomial 共轭"></a>Beta Binomial 共轭</h2><p><strong>在贝叶斯统计中，如果后验分布与先验分布属于同分布，则先验分布与后验分布被称为共轭分布，而先验分布被称为似然函数的共轭先验.</strong><br>Beta分布是Binomial分布的共轭先验   </p>
<h3 id="Beta分布"><a href="#Beta分布" class="headerlink" title="Beta分布"></a>Beta分布</h3><p><img src="https://upload-images.jianshu.io/upload_images/9608551-af749f174ca0a672.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="9.png"><br>可以通过推导n个独立产生于同一个均匀分布的数字中第k大数字的过程推导出Beta分布,具体可参考靳志辉老师的LDA数学八卦<br>Beta分布的期望:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-18a8c2834cef9508.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="13.png">  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/9608551-473bc02b0326d09f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="14.png"><br>Beta分布(from Wikipedia)<br>PDF:probability density function(概率密度函数)<br><img src="https://upload-images.jianshu.io/upload_images/9608551-09494c29a5fc9eb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="8.png"><br>因为Beta分布可以拟合多种曲线,所以被广泛使用   </p>
<h3 id="二项分布"><a href="#二项分布" class="headerlink" title="二项分布"></a>二项分布</h3><p>n是总的试验次数,p是实验成功的概率,k是实验成功的次数<br>Probability mass function:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-df0cfb91ca0a4775.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="12.png">  </p>
<h3 id="Beta-Binomial-共轭-1"><a href="#Beta-Binomial-共轭-1" class="headerlink" title="Beta Binomial 共轭"></a>Beta Binomial 共轭</h3><p>按照贝叶斯推理的过程引出Beta-Binomial共轭:  </p>
<ol>
<li>p是要猜的参数,假设p的先验分布为Beta分布,即<br><img src="https://upload-images.jianshu.io/upload_images/9608551-e6386209e22f77b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="10.png"></li>
<li>现有m个数字,知道这m个数字与p的大小关系,其中有m1个数字比p小,m2个数字比p大(m1+m2=m).可知这m个数字与p的大小关系是二项分布(Binomial Distribution)的一个观察值  </li>
<li>那么根据m1和m2这个经验,我们便可以得到p的后验分布(证明过程可参考靳志辉老师的LDA数学八卦,并不复杂)<br><img src="https://upload-images.jianshu.io/upload_images/9608551-b364ad17cc4ac7e6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="11.png"><br>后验分布和先验分布都是Beta分布,只不过是参数变了,所以Beta分布式二项分布的共轭先验.  </li>
</ol>
<p><strong>实际上,第一步也可以假设p服从其它分布,只不过因为观察值服从二项分布,所以假设p为Beta分布后,p的后验概率也服从Beta分布,方面计算</strong></p>
<h2 id="Dirichlet-Multinomial-共轭"><a href="#Dirichlet-Multinomial-共轭" class="headerlink" title="Dirichlet Multinomial 共轭"></a>Dirichlet Multinomial 共轭</h2><h3 id="Dirichlet分布"><a href="#Dirichlet分布" class="headerlink" title="Dirichlet分布"></a>Dirichlet分布</h3><p><img src="https://upload-images.jianshu.io/upload_images/9608551-1888464f88355ee6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="15.png"><br><strong>Beta分布就是Dirichlet分布的参数n=2时的情况</strong><br>Dirichlet分布的期望:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-0f92d3be43897145.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="16.png"><br>或者<br><img src="https://upload-images.jianshu.io/upload_images/9608551-08d06e7d4e3aea6e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="17.png"><br>Dirichlet分布(from Wikipedia)<br>dirichlet-distribution:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-44eac7aedc9e0d54.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="dirichlet-distribution.png"></p>
<p><strong>LogDirichletDensity-alpha_0.3_to_alpha_2.0</strong><br><strong>在LDA中用的主要是α＜1的对称Dirichlet分布</strong><br><img src="https://upload-images.jianshu.io/upload_images/9608551-99f2acf0a081f039.gif?imageMogr2/auto-orient/strip" alt="LogDirichletDensity-alpha_0.3_to_alpha_2.0.gif">  </p>
<h3 id="Multinomial-分布"><a href="#Multinomial-分布" class="headerlink" title="Multinomial 分布"></a>Multinomial 分布</h3><p>多项分布是二项分布的推广,举例来说,多项分布建模的是这一问题:有一个k个面的骰子,投掷一次结果是第i的面概率是pi,现独立地投掷n次,结果是第i个面的有xi次,多项分布就是给出了投掷n次后各种结果的概率公式<br>Probability mass function:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-7d8501965f170945.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="18.png"><br><strong>Binomial分布就是Multinomial分布的n=2时的情况</strong></p>
<h3 id="Dirichlet-Multinomial-共轭-1"><a href="#Dirichlet-Multinomial-共轭-1" class="headerlink" title="Dirichlet Multinomial 共轭"></a>Dirichlet Multinomial 共轭</h3><p>类似Beta Binomial共轭的贝叶斯推理:</p>
<ol>
<li>(p1,p2,…pn)是要猜的参数,假设(p1,p2,…pn)的先验分布为Dirichlet分布</li>
<li>现有n个数字(x1,x2,…,xn),知道这n个数字与(p1,p2,…pn)的大小关系,其中有c1个数字比p1小,c2个数字比p1大同时比p2小,cn个数字比p_(n-1)大同时比pn小.这n个数字与(p1,p2,…pn)的大小关系是多项分布的一个观察值     </li>
<li>根据(c1,c2,…,cn)这个经验,可以得到(p1,p2,…pn)的后验分布<br><img src="https://upload-images.jianshu.io/upload_images/9608551-2448311b96de77d8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="19.png"></li>
</ol>
<p>参考:靳志辉,LDA数学八卦</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/19/SupportVectorMachine%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/19/SupportVectorMachine%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/" class="post-title-link" itemprop="url">SupportVectorMachine支持向量机</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-19 21:52:02" itemprop="dateCreated datePublished" datetime="2018-03-19T21:52:02+08:00">2018-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>支持向量机(support vector machine,SVM)是一种<strong>二分类</strong>模型,它的基本模型是定义在<strong>特征空间上的</strong>间隔最大的<strong>线性分类器</strong>,间隔最大使它有别于感知机.<br>有3类支持向量机模型:<br>    1. 线性可分支持向量机<br>    2. 线性支持向量机<br>    3. 非线性支持向量机<br>(这三种模型建立思路很像,求解过程不同)</p>
<h2 id="线性可分支持向量机"><a href="#线性可分支持向量机" class="headerlink" title="线性可分支持向量机"></a>线性可分支持向量机</h2><h3 id="几何间隔与函数间隔的引出"><a href="#几何间隔与函数间隔的引出" class="headerlink" title="几何间隔与函数间隔的引出"></a>几何间隔与函数间隔的引出</h3><p>超平面wx+b=0外一点x0到超平面的距离公式(几何间隔):<br><img src="https://upload-images.jianshu.io/upload_images/9608551-cb47940a8aefedf2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w400" alt="1.png"><br>分母是w的二范式,不随x0的改变而改变,所以可以分子|wx0+b|能够相对地表示点x0距离超平面wx+b=0的远近.<br>一个点距离分离超平面的远近可以表示分类预测的确信程度.<br>wx0+b的符号与类标记y0的符号是否一致能够表示分类是否正确.<br>所以,<strong>可用y0(wx0+b)来表示分类的正确性及确信度,这就是函数间隔(functional margin)</strong>  </p>
<h3 id="函数间隔"><a href="#函数间隔" class="headerlink" title="函数间隔"></a>函数间隔</h3><p>超平面(w,b)关于样本点xi的函数间隔为:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-e8b5378ba5f3102a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="2.png"><br>超平面(w,b)关于训练集T的函数间隔为:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-a71ba18772effb31.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="3.png"></p>
<h3 id="几何间隔"><a href="#几何间隔" class="headerlink" title="几何间隔"></a>几何间隔</h3><p>超平面(w,b)关于样本点xi的几何间隔为:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-12f6cc40439d27cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="4.png"><br>超平面(w,b)关于训练集T的几何间隔为:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-d7377c98b9552ecc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="5.png"></p>
<h3 id="硬间隔最大化"><a href="#硬间隔最大化" class="headerlink" title="硬间隔最大化"></a>硬间隔最大化</h3><p>找到了超平面(w,b)关于训练集T的几何间隔后,自然地希望最大化这个几何间隔以保证之后分类预测的确信程度<br>目标函数和约束如下:<br>约束表示超平面(w,b)关于任意样本点的几何间隔大于等于超平面(w,b)关于训练集T的几何间隔<br><img src="https://upload-images.jianshu.io/upload_images/9608551-ff6aaae6d39a51a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="6.png"><br>在约束中约去||w||并展开γ^<br><img src="https://upload-images.jianshu.io/upload_images/9608551-79a73fb2c8d759f4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="6.1.png"><br>求出w,b的话问题就解决了,先别急,让我们化简一下上面的式子<br>注意到,如果对w,b同比例的放缩,即变成kw,kb,函数间隔yi(wxi+b)也会成比例k变化,而超平面(w,b)没有变化,<br>此时原问题和约束变为:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-a1067828cc35c333.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="7.png"><br>约掉k后,目标函数和约束没有改变,说明对w,b进行同比例放缩丝毫不影响目标函数和约束,<strong>那么可以选取合适的k让函数间隔γ^=1</strong>,也就是<br><img src="https://upload-images.jianshu.io/upload_images/9608551-f03595219d20d995.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="8.1.png"><br>这样一来,目标函数和约束就变成了:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-fb455cb8c8f44856.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="8.png"><br>把||w||挪到分子上平方一下再乘个常数就有了:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-0ba320ed7a3a25c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="9.png"><br>比最初的形式简化了不少,这是个带约束问题,通过Lagrange Multiplier拉格朗日乘子法化成无约束问题:<br>(原问题:极大极小)<br><img src="https://upload-images.jianshu.io/upload_images/9608551-9ad79d65f9fbcfa3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="10.png"></p>
<p>具体原理可参考之前的文章<a href="http://littlehaes.com/2018/03/15/Lagrange-duality拉格朗日对偶性/" target="_blank" rel="noopener">Lagrange duality拉格朗日对偶性</a><br>对偶形式:  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/9608551-37cbecb2b63b0e90.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="11.png"><br>其中:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-36db3de657af14ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200" alt="12.png"><br>所以有:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-8bd130a5b32d40c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="13.png"><br>进而有(最终形式):<br><strong>下面的约束是求 min L(w,b,α)时得到的</strong><br><strong>这是个凸二次规划问题(目标函数是二次函数,不等式约束是仿射函数)</strong><br><img src="https://upload-images.jianshu.io/upload_images/9608551-ba6dc472a61377cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="14.png"><br>求解得到α<em>=(α1,α2,…,αN)^t,这是对偶问题的解,<br>可由α*得到w\</em>,b*<br><img src="https://upload-images.jianshu.io/upload_images/9608551-9f239a4deb2998e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="15.png"><br><strong>之所以能从对偶问题获得原问题的解,是因为原问题为凸二次规划问题,并且解α*,w*,b* 满足KKT条件</strong><br>有了w*,b*就能得到最大间隔分离超平面和分类决策函数:  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/9608551-a745a7f9db18b42b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="16.png"></p>
<h3 id="支持向量"><a href="#支持向量" class="headerlink" title="支持向量"></a>支持向量</h3><p>通过由α*得到w*,b*的公式可以知道,对应α*=0的实例xi对超平面(w*,b*)的两个参数都没有贡献,只有对应α*＞0的实例xi对超平面(w*,b*)的两个参数有贡献,也就是说<strong>超平面完全由对应α*＞0的实例决定,这些实例称为支持向量,由KKT的互补条件知,若α*＞0,则有y(wx+b)-1=0,即wx+b=±1,说明支持向量都在间隔边界上</strong></p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>对于线性可分SVM学习来说:</p>
<ol>
<li>模型为分离超平面和决策函数</li>
<li>学习策略:硬间隔最大化(间隔的描述及约束)</li>
<li>学习算法:凸二次规划</li>
</ol>
<h2 id="线性支持向量机"><a href="#线性支持向量机" class="headerlink" title="线性支持向量机"></a>线性支持向量机</h2><p>通常情况下,训练数据中有一些特异点(outlier),将这些特异点去掉后,剩下的大部分样本点组成的集合是线性可分的.<strong>线性不可分意味着不是所有点都满足函数间隔大于等于1的约束,为解决这个问题,引入一个松弛变量ζi≥0,使函数间隔加上松弛变量后大于等于1</strong>.即,y(wx+b)+ζ≥1  </p>
<h3 id="软间隔最大化"><a href="#软间隔最大化" class="headerlink" title="软间隔最大化"></a>软间隔最大化</h3><p>对每个松弛变量ζi,支付一个代价ζi,目标函数变为<br><img src="https://upload-images.jianshu.io/upload_images/9608551-cb73960c94d02fd2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="17.png"><br><strong>这里C&gt;0称为惩罚参数</strong>,C越大则对<strong>错误分类</strong>的惩罚越大<br><strong>最小化上述目标函数实现的是软间隔最大化,最小化上式包含两层含义:使1/2||w||^2尽量小,即间隔尽量大,同时使误分类点的个数尽量小</strong>.<br>硬间隔就是真正的间隔,软间隔是包含了代价项ζ的硬间隔<br>由上分析便得到了线性支持向量机的学习目标:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-da01a6d13df631f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="18.png"><br>化为拉格朗日形式(不带约束)的原问题:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-5baedeed43709629.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="19.png"><br>对偶问题:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-2ffb45c01091ba8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="20.png"><br>其中:  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/9608551-619deff39232027d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="21.png"><br>进而:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-a9bcbe2fe16a3198.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="22.png"><br>所以对偶问题的最终形式:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-9ebde8500c681fd5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="23.png"><br><strong>与线性可分SVM的对偶最终形式相比只是α的约束不同,约束增强了</strong><br>求解得到α<em>=(α1,α2,…,αN)^t,这是对偶问题的解,<br>可由α*得到w\</em>,b*<br><img src="https://upload-images.jianshu.io/upload_images/9608551-75f93ccc1366c519.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="24.png"><br>有了w*,b*就能得到最大间隔分离超平面和分类决策函数:  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/9608551-a745a7f9db18b42b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="16.png"></p>
<h3 id="支持向量-1"><a href="#支持向量-1" class="headerlink" title="支持向量"></a>支持向量</h3><p>和线性可分SVM类似,<strong>超平面完全由对应α*＞0的实例决定,这些实例称为支持向量,但是线性SVM的支持向量不一定都在间隔边界上</strong><br><img src="https://upload-images.jianshu.io/upload_images/9608551-0d88d26ab51bd146.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="25.png"><br><strong>KKT互补条件之一:α*(y(w*x+b)+ζ-1)=0</strong><br>当0&lt;αi&lt;C时,ζi=0,则y(w*x+b)-1=0,此时支持向量在间隔边界上<br>当αi=C时,ζi&gt;0,支持向量可能在:<br>间隔边界与超平面之间:0&lt;ζi&lt;1<br>超平面上:ζi=1<br>误分类一侧:ζi&gt;1</p>
<h3 id="Hinge-Loss-Function合页损失函数"><a href="#Hinge-Loss-Function合页损失函数" class="headerlink" title="Hinge Loss Function合页损失函数"></a>Hinge Loss Function合页损失函数</h3><p>线性SVM的学习还有另一种等价模型,即最小化目标函数:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-dd7d0f6f1c592edb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="26.png"><br><img src="https://upload-images.jianshu.io/upload_images/9608551-39a14e13eb96d885.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="27.png"><br><img src="https://upload-images.jianshu.io/upload_images/9608551-6d4b1abf51657921.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="28.png"><br>证明新目标函数与原问题等价时,主要抓住三点:<br>    1. hinge loss≥0<br>    2. 令[1-y(wx+b)]_+=ζ<br>    3. 讨论1-y(wx+b)的取值范围<br>L(y(wx+b))说明了:<br>    1. 点到超平面的函数距离≥1时,损失为0<br>    2. 点到超平面的函数距离＜1时,损失为1-y(wx+b)<br>下图蓝线代表hinge loss的图像<br><img src="https://upload-images.jianshu.io/upload_images/9608551-00605cf8a8f496b7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="29.png"></p>
<h3 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h3><p>对于线性SVM学习来说:</p>
<ol>
<li>模型为分离超平面和决策函数(线性SVM的对偶形式)</li>
<li>学习策略:软间隔最大化(间隔的描述及约束)</li>
<li>学习算法:凸二次规划</li>
</ol>
<h2 id="非线性支持向量机"><a href="#非线性支持向量机" class="headerlink" title="非线性支持向量机"></a>非线性支持向量机</h2><p>用线性分类方法求解非线性分类任务分为两步:<br>    1. 将训练数据从输入空间(欧式空间或离散集合)映射到新的特征空间(希尔伯特空间)使数据在新特征空间中线性可分<br>    2. 在新特征空间中用线性分类学习方法从训练数据中学习分类模型,<strong>使得输入空间中的超曲面模型对应特征空间中的超平面模型</strong><br>Kernel trick(核技巧)便属于这样的方法</p>
<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p> <img src="https://upload-images.jianshu.io/upload_images/9608551-9bb863f114d19818.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="30.png"><br> K(x1,x2)=φ(x1)φ(x2)是个对称函数,叫作正定核(positive definite kernel)<br> 一般只定义K(x1,x2),而不显式地定义φ(x),那么如何保证K(x1,x2)是正定核呢?<br> 正定核的充要条件:<br> <img src="https://upload-images.jianshu.io/upload_images/9608551-e996f799fb0dba36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="33.png"><br>证明过程需要预备知识:构造希尔伯特空间  </p>
<ul>
<li>定义映射φ并构成向量空间S(对加法和数乘运算封闭的集合)</li>
<li>在S上定义内积构成内积空间(用到了欧式空间Gram矩阵的半正定性)</li>
<li>将内积空间S完备化为希尔伯特空间</li>
</ul>
<p>由α*得到b*<br><img src="https://upload-images.jianshu.io/upload_images/9608551-10a67cf49667196b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="31.png"><br>分类决策函数<br><img src="https://upload-images.jianshu.io/upload_images/9608551-5d6ac4ec7544f2b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="32.png"></p>
<h3 id="常用的核函数"><a href="#常用的核函数" class="headerlink" title="常用的核函数"></a>常用的核函数</h3><p>正定核的充要条件在构造核函数时很有用.但对于一个具体函数K(x,z)来说,检验它是否为正定核并不容易,因为需要对任意有限输入集{x1,x2,…,xm}验证K对应的Gram矩阵(在希尔伯特空间)是否为半正定的.实际问题中往往应用已有的核函数</p>
<ol>
<li><p>多项式核函数(polynomial kernel function)<br><img src="https://upload-images.jianshu.io/upload_images/9608551-19fdfd50cf1ea07e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="34.png"><br>对应的支持向量机是一个p次多项式分类器,分类决策函数为:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-dea5107f0a5c63fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="35.png">  </p>
</li>
<li><p>高斯核函数(Gaussian kernel function)<br>通过泰勒展开可知高斯核是无穷维的<br><img src="https://upload-images.jianshu.io/upload_images/9608551-9bf1ddec2773600f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="36.png"><br>对应的支持向量机是高斯径向基函数(radial basis function)分类器,分类决策函数为:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-408894baa045886f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="37.png">  </p>
</li>
<li><p>字符串核函数(string kernel function)<br>定义在字符串集合上的核函数,字符串核函数应用在文本分类,信息检索,生物信息学等方面.<br>k_n(s,t)给出了字符串s和t中长度等于n的所有子串组成的特征向量的余弦相似度(cosine similarity).直观上,两个字符串相同的子串越多,它们就越相似,字符串核函数的值就越大.字符串核函数可以由动态规划快速计算</p>
<h3 id="SMO算法"><a href="#SMO算法" class="headerlink" title="SMO算法"></a>SMO算法</h3><p>SMO:sequential minimal optimization<br>利用SMO算法实现SVM的学习<br><img src="https://upload-images.jianshu.io/upload_images/9608551-9bb863f114d19818.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/900" alt="30.png"><br>SMO算法包括两个部分:</p>
<ol>
<li>求解两个变量二次规划的解析方法(线性规划;把握好对g(x)和Ei的理解)</li>
<li>选择变量的启发式方法(KKT;|E1-E2|最大)</li>
</ol>
<p>参考:李航,统计学习方法</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/15/Lagrange-duality%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E5%AF%B9%E5%81%B6%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/15/Lagrange-duality%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E5%AF%B9%E5%81%B6%E6%80%A7/" class="post-title-link" itemprop="url">Lagrange duality拉格朗日对偶性</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-15 21:33:47" itemprop="dateCreated datePublished" datetime="2018-03-15T21:33:47+08:00">2018-03-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在约束最优化问题(Constrained Optimization)中,常常利用拉格朗日对偶性(Lagrange duality)将原始问题转换为对偶问题,通过求解对偶问题而得到原始问题的解,该方法可用在最大熵模型(Maximum Entropy)和支持向量机(Support Vector Machine).</p>
<h3 id="约束最优化问题"><a href="#约束最优化问题" class="headerlink" title="约束最优化问题"></a>约束最优化问题</h3><p>标准形式:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-c79452321b9f5839.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="1.png"><br>f(x),c(x),h(x)是定义在R^n上的连续可微函数,c(x)为不等式约束(inequality constraints),h(x)为等式约束(equality constraints).<br>几个重要定义:<br>可行点(feasible point):满足所有约束条件的x<br>可行域Ω(feasible set):所有可行点组成的集合<br><img src="https://upload-images.jianshu.io/upload_images/9608551-b3ac73d39392f1fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="2.png"><br>激活集A(x): 可行域中使得不等式约束取等的点以及满足等式约束的那些点<br><strong>LICQ条件</strong>:对于激活集A(x),如果激活集中的点对应的约束的梯度向量线性无关,<br><img src="https://upload-images.jianshu.io/upload_images/9608551-058ed647d47b8bcf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="3.png"><br>那么称LICQ(linear independence constraint qualification)条件成立<br>这个条件说明了各个取等的约束都是独立的,不能被消掉,比如说其中两个等式约束为:<br>2x+3y=10<br>4x+6y=20<br>这两个等式实质上是一个等式,对应梯度向量分别为(2,3)^t,(4,6)^t,可能发现这两个向量线性相关</p>
<h3 id="拉格朗日对偶"><a href="#拉格朗日对偶" class="headerlink" title="拉格朗日对偶"></a>拉格朗日对偶</h3><h4 id="原始问题"><a href="#原始问题" class="headerlink" title="原始问题"></a>原始问题</h4><p>刚才已经讨论过了,下图就被称为约束最优化问题的原始问题<br><img src="https://upload-images.jianshu.io/upload_images/9608551-c79452321b9f5839.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="1.png"><br>拉格朗日在哪里?下面引进广义拉格朗日函数(generalized Lagrange function)<br><img src="https://upload-images.jianshu.io/upload_images/9608551-2a7bd8f1d39eaf17.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="4.png"><br>这里,x=(x1,x2,…xn)^t∈R,αi,βj是拉格朗日乘子,<strong>αi≥0</strong>.考虑x的函数:  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/9608551-7e503200be7106db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="5.png"><br>下标P表示原始问题<br>假设给定某个x.如果x违反原始问题的约束条件,即存在某个i使得ci(w)&gt;0或者存在某个j使得hj(x)≠0,那么有:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-71ed8ab84c88332d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="6.png"><br>因为若某个i使约束ci(x)&gt;0,则可令αi→+∞,若某个j使约束hj(x)≠0,则可令βj使βj*hj(x)→+∞<br>相反地,<strong>如果x满足等式与不等式约束条件,则有θp(x)=f(x)</strong>,因此有<br><img src="https://upload-images.jianshu.io/upload_images/9608551-ce7deebb72c752b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="7.png"><br>此时考虑极小化问题<br><img src="https://upload-images.jianshu.io/upload_images/9608551-7901afc5bf1932d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="8.png"><br>这是与原始问题等价的,即它们有相同的解.<br>下图称为广义拉格朗日函数的极小极大问题,<br><img src="https://upload-images.jianshu.io/upload_images/9608551-dd02f2c289b23adf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="9.png"><br><strong>这样一来就把原始问题表示为广义拉格朗日函数的极小极大问题</strong><br>定义原始问题的最优值p*<br><img src="https://upload-images.jianshu.io/upload_images/9608551-49e93a82b8df37c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="10.png"><br>p*称为原始问题的值</p>
<h4 id="对偶问题"><a href="#对偶问题" class="headerlink" title="对偶问题"></a>对偶问题</h4><p>定义:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-e788b052fd4a2514.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="11.png"><br>再考虑极大化θ,如下图<br><img src="https://upload-images.jianshu.io/upload_images/9608551-1a5f09aed48a8bf0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="12.png"><br>上面两个式子合起来写就是,下式称为拉格朗日函数的极大极小问题<br><img src="https://upload-images.jianshu.io/upload_images/9608551-849730004edaa159.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="13.png"><br>可以将拉格朗日函数的极大极小问题表示为约束最优化问题:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-042deb162d73134e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="14.png"><br>称为原始问题的对偶问题.定义对偶问题的最优值<br><img src="https://upload-images.jianshu.io/upload_images/9608551-09853c70d2314414.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="15.png"><br>称为对偶问题的值</p>
<h4 id="原始问题与对偶问题的关系"><a href="#原始问题与对偶问题的关系" class="headerlink" title="原始问题与对偶问题的关系"></a>原始问题与对偶问题的关系</h4><p>定理1:若原始问题和对偶问题都有最优值,则<br><img src="https://upload-images.jianshu.io/upload_images/9608551-08a8dfbd9f5a13f4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="16.png"><br>证明:容易知道,对任意的α,β,x,有:<br><img src="https://upload-images.jianshu.io/upload_images/9608551-2067c237b3c15995.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="17.png"><br>即<br><img src="https://upload-images.jianshu.io/upload_images/9608551-da58c7031224ddb5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="18.png"><br>由于原始问题和对偶问题均有最优值,所以<br><img src="https://upload-images.jianshu.io/upload_images/9608551-d187b96a9e6a2e9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="19.png"><br>即<br><img src="https://upload-images.jianshu.io/upload_images/9608551-08a8dfbd9f5a13f4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="16.png">  </p>
<p>推论1:设x*和α*,β*分别是原始问题和对偶问题的可行解,并且d<em>=p</em>,则x*和α*,β*分别是原始问题和对偶问题的最优解.  </p>
<p><strong>在某些条件下,原始问题和对偶问题的最优值相等,d*=p*.这时可以用解对偶问题替代解原始问题.</strong><br>定理2:考虑之前的原始问题和对偶问题,假设函数f(x)和ci(x)是凸函数,hj(x)是仿射函数;并且假设不等式约束ci(x)是严格可行的,即存在x,对所有i有ci(x)＜0,<strong>则存在x*,α*,β*,使x*是原始问题的解,α*,β*是对偶问题的解,并且p*=d*=L(x*,α*,β*)</strong></p>
<p>定理3 考虑之前的原始问题和对偶问题,假设函数f(x)和ci(x)是凸函数,hj(x)是仿射函数;并且假设不等式约束ci(x)是严格可行的,<strong>那么x*,α*,β*分别是原始问题和对偶问题的最优解的充分必要条件是x*,α*,β*满足KKT条件(Karush-Kuhn-Tucker)</strong><br><strong>KKT条件:</strong><br><img src="https://upload-images.jianshu.io/upload_images/9608551-f11019ef3d4becc3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="20.png"><br>特别地,<br><img src="https://upload-images.jianshu.io/upload_images/9608551-c454f76cd45e7b3d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="21.png"><br>称为KKT的对偶互补条件.<strong>由此条件可知:若αi*&gt;0,则ci(x*)=0.或者说,约束优化问题的解,要么αi*=0,要么x是激活集中的点,也就是满足ci(x*)=0的点</strong><br>参考:李航,统计学习方法</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/01/Python%E6%8A%80%E5%B7%A7-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/01/Python%E6%8A%80%E5%B7%A7-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">Python技巧:字符串处理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-01 22:40:53" itemprop="dateCreated datePublished" datetime="2018-03-01T22:40:53+08:00">2018-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="拆分含有多种分隔符的字符串"><a href="#拆分含有多种分隔符的字符串" class="headerlink" title="拆分含有多种分隔符的字符串"></a>拆分含有多种分隔符的字符串</h3><ol>
<li><p>使用.split()<br>注意list.extend()<br>append是把整个扩充列表作为一个元素追加到列表最后,而Extend则是把每个元素都作为一个独立的元素扩充到原来的列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'liio;15176|0.0\\0.0,522,65,228,72:p|ts/11+R+'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mySplit</span><span class="params">(s,ds)</span>:</span></span><br><span class="line">    res = [s]</span><br><span class="line">    <span class="keyword">for</span> i,d <span class="keyword">in</span> enumerate(ds):</span><br><span class="line">        l = []</span><br><span class="line">        <span class="comment">#!!如果分割中途有个分隔符在元素的末尾,则会分割出一个空元素</span></span><br><span class="line">        <span class="comment">#list.extend(sequence) 把一个序列seq的内容展平后添加到列表中</span></span><br><span class="line">        map(<span class="keyword">lambda</span> x:l.extend(x.split(d)),res) </span><br><span class="line">        <span class="comment"># print '第%s次分割结果(分割符为%s):'%(i+1,d),l</span></span><br><span class="line">        res = l</span><br><span class="line">    <span class="comment">#当x非空时返回</span></span><br><span class="line">    <span class="keyword">return</span> [x <span class="keyword">for</span> x <span class="keyword">in</span> res <span class="keyword">if</span> x]</span><br><span class="line">new = mySplit(s,<span class="string">';|\\.+,,/'</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">'new[] = '</span>,new</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用正则表达式re.split()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方案二  使用正则表达式</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">'liio;15176|0.0\\0.0,522,65,228,72:p|ts/11+R+'</span></span><br><span class="line"><span class="comment">#def split(pattern, string, maxsplit=0, flags=0)</span></span><br><span class="line"><span class="comment">#Split the source string by the occurrences of the pattern,</span></span><br><span class="line"><span class="comment">#returning a list containing the resulting substrings</span></span><br><span class="line"><span class="comment">#[]中的每个字符都可作为分割符</span></span><br><span class="line">q = re.split(<span class="string">r'[;|\\.+,,/]+'</span>,s)</span><br><span class="line"><span class="keyword">print</span> q</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>两种方法对比: <strong>s.split()速度更快,但是不能处理多个分割符; 推荐使用正则表达式</strong></p>
<h3 id="判断字符串a是否以字符串b开头或结尾"><a href="#判断字符串a是否以字符串b开头或结尾" class="headerlink" title="判断字符串a是否以字符串b开头或结尾"></a>判断字符串a是否以字符串b开头或结尾</h3><p>不仅可以用来处理文本文件,还可以处理磁盘中的文件,<strong>筛选出所需的文件类型</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,stat</span><br><span class="line">f = os.listdir(<span class="string">'ceshi/'</span>)</span><br><span class="line"><span class="keyword">print</span> f</span><br><span class="line">s = f[<span class="number">0</span>]</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">def endswith(self, suffix, start=None, end=None)</span></span><br><span class="line"><span class="string">Return True if S ends with the specified suffix, False otherwise.</span></span><br><span class="line"><span class="string">With optional start, test S beginning at that position.</span></span><br><span class="line"><span class="string">With optional end, stop comparing S at that position.</span></span><br><span class="line"><span class="string">suffix can also be a tuple of strings to try. 要求是元组!!不能用list</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># print s.endswith(('.sh','.py'))</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> os.listdir(<span class="string">'ceshi/'</span>):</span><br><span class="line">    <span class="keyword">if</span> name.endswith((<span class="string">'.sh'</span>,<span class="string">'.py'</span>)):</span><br><span class="line">        <span class="keyword">print</span> name</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改文件权限前要先查看文件权限,用stat</span></span><br><span class="line"><span class="keyword">print</span> os.stat(<span class="string">'ceshi/a.sh'</span>)</span><br><span class="line"><span class="keyword">print</span> os.stat(<span class="string">'ceshi/a.sh'</span>).st_mode</span><br><span class="line"><span class="comment">#先把权限代码转换成八进制</span></span><br><span class="line"><span class="comment">#666分别是user,group,others的权限值</span></span><br><span class="line"><span class="keyword">print</span> oct(os.stat(<span class="string">'ceshi/a.sh'</span>).st_mode)</span><br><span class="line">os.chmod(<span class="string">'ceshi/a.sh'</span>,os.stat(<span class="string">'ceshi/a.sh'</span>).st_mode | stat.S_IXUSR)</span><br><span class="line"><span class="comment">#看来666是最大权限了</span></span><br><span class="line"><span class="keyword">print</span> oct(os.stat(<span class="string">'ceshi/a.sh'</span>).st_mode)</span><br></pre></td></tr></table></figure>
<h3 id="调整字符串中文本的格式"><a href="#调整字符串中文本的格式" class="headerlink" title="调整字符串中文本的格式"></a>调整字符串中文本的格式</h3><p>配合正则表达式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">f = open(<span class="string">'ceshi/date.txt'</span>,<span class="string">'r'</span>)</span><br><span class="line"><span class="comment">#def sub(pattern, repl, string, count=0, flags=0)</span></span><br><span class="line"><span class="string">"""Return the string obtained by replacing the leftmost</span></span><br><span class="line"><span class="string">    non-overlapping occurrences of the pattern in string by the</span></span><br><span class="line"><span class="string">    replacement repl.  repl can be either a string or a callable;</span></span><br><span class="line"><span class="string">    if a string, backslash escapes in it are processed.  If it is</span></span><br><span class="line"><span class="string">    a callable, it's passed the match object and must return</span></span><br><span class="line"><span class="string">    a replacement string to be used."""</span></span><br><span class="line"><span class="comment">#首先描述日期格式</span></span><br><span class="line"><span class="comment">#repl中的/是分隔符</span></span><br><span class="line"><span class="comment">#re.sub第一个参数中的每个括号都是正则表达式的一个捕获组,根据左括号的顺序排序</span></span><br><span class="line"><span class="comment">#pattern:匹配规则   repl:要替换成什么样子   string:要替换谁</span></span><br><span class="line"><span class="comment">#rel参数调整了捕获组在原文本中的顺序,/是分隔符</span></span><br><span class="line"><span class="keyword">print</span> re.sub(<span class="string">'(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)'</span>,<span class="string">r'\2/\3/\1'</span>,f.read())</span><br><span class="line">f.close()</span><br><span class="line"><span class="comment">#使用r来输出原始字符串,消除\的转义功能</span></span><br><span class="line"><span class="comment">#字符串什么样子就打印出什么样子,所以叫做原始字符串</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">r'\\1</span></span><br><span class="line"><span class="string">print r'</span>\<span class="number">1</span><span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f = open('</span>ceshi/date.txt<span class="string">','</span><span class="string">r')</span></span><br><span class="line"><span class="string">#re.sub()中还可以给组起个名字,用?P&lt;&gt;起名</span></span><br><span class="line"><span class="string">#月日年是美国的日期格式</span></span><br><span class="line">print re.sub('(?P&lt;year&gt;\d&#123;4&#125;)-(?P&lt;month&gt;\d&#123;2&#125;)-(?P&lt;day&gt;\d&#123;2&#125;)',r'\g&lt;month&gt;/\g&lt;day&gt;/\g&lt;year&gt;',f.read())</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<h3 id="将多个小字符串拼接成一个大的字符串"><a href="#将多个小字符串拼接成一个大的字符串" class="headerlink" title="将多个小字符串拼接成一个大的字符串"></a>将多个小字符串拼接成一个大的字符串</h3><ol>
<li>直接用+拼接字符串<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">'abcdefg'</span></span><br><span class="line">s2 = <span class="string">'12345'</span></span><br><span class="line"><span class="comment">#s1 + s2实际调用的是s1.__add__(s2)这个方法</span></span><br><span class="line"><span class="comment">#def __add__(self, y)</span></span><br><span class="line"><span class="comment">#x.__add__(y) &lt;==&gt; x+y</span></span><br><span class="line"><span class="keyword">print</span> s1 + s2</span><br><span class="line"><span class="keyword">print</span> str.__add__(s1,s2)</span><br><span class="line"><span class="comment">#这样也可以</span></span><br><span class="line"><span class="keyword">print</span> str.__add__(s1,s2)</span><br><span class="line"></span><br><span class="line"><span class="comment">#str.__gt__()</span></span><br><span class="line"><span class="keyword">print</span> s1&gt;s2</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line">l = [str(randint(<span class="number">0</span>,<span class="number">50</span>)) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line"><span class="keyword">print</span> l</span><br><span class="line">s = <span class="string">''</span></span><br><span class="line"><span class="comment">#这种方法会不断的创建临时变量,再释放,如果字符串特别长,开销就会很巨大,用str.join()方法</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> l:</span><br><span class="line">    s+=x</span><br><span class="line">    <span class="keyword">print</span> s</span><br><span class="line"><span class="keyword">print</span> s</span><br></pre></td></tr></table></figure></li>
<li>用str.join()<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">join</span><span class="params">(self, iterable)</span></span></span><br><span class="line"><span class="function">"""</span></span><br><span class="line"><span class="function"><span class="title">S</span>.<span class="title">join</span><span class="params">(iterable)</span> -&gt; string</span></span><br><span class="line"><span class="function">Return a string which is the concatenation of the strings in the iterable.</span></span><br><span class="line"><span class="function">注意!!支持的是可迭代对象里面的字符串类型!!!!</span></span><br><span class="line"><span class="function">The separator between elements is S.</span></span><br><span class="line"><span class="function">S是作为分隔符</span></span><br><span class="line"><span class="function">"""</span></span><br><span class="line"><span class="function">#这种方法一次性就连接起来,不存在临时变量的浪费</span></span><br><span class="line"><span class="function">print ';'.join(['abc','123','aaaaa'])</span></span><br><span class="line"><span class="function">print ''.join(['abc','123','aaaaa'])</span></span><br><span class="line"><span class="function">#切记:</span>如果列表里面既有str又有int,flaoat,就不能直接连接!!!!!!!!</span><br><span class="line"></span><br><span class="line"><span class="comment">#可以用列表生成式.不过这样做会先形成一个完整的列表,可以用生成器</span></span><br><span class="line">l = [<span class="string">'abc'</span>,<span class="string">'123'</span>,<span class="string">'aaaaa'</span>,<span class="number">11</span>,<span class="number">2</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">''</span>.join([str(x) <span class="keyword">for</span> x <span class="keyword">in</span> l])</span><br><span class="line"><span class="comment">#生成器方法,将[]改成()即可,非常方便</span></span><br><span class="line"><span class="comment">#&lt;type 'generator'&gt;</span></span><br><span class="line"><span class="keyword">print</span> type(((str(x) <span class="keyword">for</span> x <span class="keyword">in</span> l )))</span><br><span class="line"><span class="keyword">print</span> <span class="string">''</span>.join((str(x) <span class="keyword">for</span> x <span class="keyword">in</span> l ))</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="将字符串进行左-右-居中对齐"><a href="#将字符串进行左-右-居中对齐" class="headerlink" title="将字符串进行左,右,居中对齐"></a>将字符串进行左,右,居中对齐</h3><ol>
<li><p>使用str.ljust()   str.center()   str.rjust()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'abc'</span></span><br><span class="line"><span class="comment">#def ljust(self, width, fillchar=None)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">左对齐</span></span><br><span class="line"><span class="string">S.ljust(width[, fillchar]) -&gt; string</span></span><br><span class="line"><span class="string">Return S left-justified in a string of length width.</span></span><br><span class="line"><span class="string">Padding is done using the specified fill character (default is a space).</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">s.ljust(<span class="number">10</span>,<span class="string">'-'</span>) <span class="comment">#左对齐,一共10个字符的位置,用空格补充空位置</span></span><br><span class="line"><span class="keyword">print</span> s.ljust(<span class="number">10</span>,<span class="string">'-'</span>)</span><br><span class="line"><span class="comment">#右对齐</span></span><br><span class="line"><span class="keyword">print</span> s.rjust(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">print</span> len(s.rjust(<span class="number">10</span>))</span><br><span class="line"><span class="comment">#居中对齐 def center(self, width, fillchar=None)</span></span><br><span class="line"><span class="keyword">print</span>  s.center(<span class="number">10</span>,<span class="string">'_'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 format()函数</p>
</li>
</ol>
<p><strong>使用map函数和dict.keys()找到键最长的key,</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'abc'</span></span><br><span class="line"><span class="comment">#def format(value, format_spec=None)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">format(value[, format_spec]) -&gt; string</span></span><br><span class="line"><span class="string">Returns value.__format__(format_spec)</span></span><br><span class="line"><span class="string">format_spec defaults to ""</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment">#左对齐</span></span><br><span class="line"><span class="keyword">print</span> format(s,<span class="string">'&lt;15'</span>)</span><br><span class="line"><span class="comment">#右对齐</span></span><br><span class="line"><span class="keyword">print</span> format(s,<span class="string">'&gt;15'</span>)</span><br><span class="line"><span class="comment">#居中对齐</span></span><br><span class="line"><span class="keyword">print</span> format(s,<span class="string">'^15'</span>)</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">'Dist'</span>:<span class="number">500.0</span>,<span class="string">'SmallCull'</span>:<span class="number">0.04</span>,<span class="string">'farclip'</span>:<span class="number">447</span>,<span class="string">'lopadDist'</span>:<span class="number">100.0</span>,<span class="string">'trilinear'</span>:<span class="number">450</span>&#125;</span><br><span class="line"><span class="comment">#先找到键最长的key,借助map函数!!!!!</span></span><br><span class="line"><span class="comment">#对齐后</span></span><br><span class="line">width = max(map(len,d.keys()))</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> d:</span><br><span class="line">    <span class="keyword">print</span> k.ljust(width),<span class="string">':'</span>,d[k]</span><br><span class="line"><span class="comment">#未对齐</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> d:</span><br><span class="line">    <span class="keyword">print</span> k, <span class="string">':'</span>, d[k]</span><br></pre></td></tr></table></figure>

<h3 id="去掉字符串中不需要的字符"><a href="#去掉字符串中不需要的字符" class="headerlink" title="去掉字符串中不需要的字符"></a>去掉字符串中不需要的字符</h3><ol>
<li><p>使用.strip()   .lstrip()   .rstrip()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#s.strip()    s.lstrip()   s.rstrip()</span></span><br><span class="line">s = <span class="string">'   ABC    123    '</span></span><br><span class="line"><span class="comment">#def strip(self, chars=None)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">S.strip([chars]) -&gt; string or unicode</span></span><br><span class="line"><span class="string">leading:开头的  trailing:后面的</span></span><br><span class="line"><span class="string">Return a copy of the string S with leading and trailing whitespace removed.</span></span><br><span class="line"><span class="string">If chars is given and not None, remove characters in chars instead.</span></span><br><span class="line"><span class="string">If chars is unicode, S will be converted to unicode before stripping!!!注意编码格式!!!</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment">#去掉两端的空白</span></span><br><span class="line"><span class="keyword">print</span> s.strip()</span><br><span class="line"><span class="comment">#去掉左端的空白</span></span><br><span class="line"><span class="keyword">print</span> s.lstrip()</span><br><span class="line"><span class="comment">#去掉右端的空白</span></span><br><span class="line"><span class="keyword">print</span> s.rstrip()</span><br><span class="line">s = <span class="string">'---abc+++'</span></span><br><span class="line"><span class="comment">#去掉-+这两个字符</span></span><br><span class="line"><span class="keyword">print</span> s.strip(<span class="string">'-+'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用切片+字符串拼接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#得知道字符串样子,不适合大量无规则文本</span></span><br><span class="line">s = <span class="string">'abc:123'</span></span><br><span class="line"><span class="keyword">print</span> s[:<span class="number">3</span>]+s[<span class="number">4</span>:]</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#s.replace()    re.sub</span></span><br><span class="line">s = <span class="string">'\tabc\t123\txyz'</span></span><br><span class="line"><span class="comment">#replace()只能替换一种字符</span></span><br><span class="line"><span class="comment">#def replace(self, old, new, count=None)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">S.replace(old, new[, count]) -&gt; string</span></span><br><span class="line"><span class="string">Return a copy of string S with all occurrences of substring old replaced by new.</span></span><br><span class="line"><span class="string">If the optional argument count is given, only the first count occurrences are replaced.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">print</span> s.replace(<span class="string">'\t'</span>,<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">使用正则表达式替换</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">'\tabc\t123\txyz\ropq'</span></span><br><span class="line"><span class="comment">#def sub(pattern, repl, string, count=0, flags=0)</span></span><br><span class="line"><span class="comment">#pattern:匹配规则   repl:要替换成什么样子   string:要替换谁</span></span><br><span class="line"><span class="keyword">print</span> re.sub(<span class="string">r'[\t\r]'</span>,<span class="string">''</span>,s)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用translate()方法</p>
</li>
</ol>
<p><strong>string和unicode都有translate方法,二者目的相同但用法稍有不同</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####### string #######</span></span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="comment"># print string.maketrans('abcxyz','xyzabc')</span></span><br><span class="line">s = <span class="string">'abc1230022xyz'</span></span><br><span class="line"><span class="keyword">print</span> s</span><br><span class="line"><span class="comment">#def translate(self, table, deletechars=None)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">S.translate(table [,deletechars]) -&gt; string</span></span><br><span class="line"><span class="string">Return a copy of the string S, where all characters occurring in the optional argument deletechars are removed,</span></span><br><span class="line"><span class="string">and the remaining characters have been mapped through the given</span></span><br><span class="line"><span class="string">translation table, which must be a string of length 256 or None.</span></span><br><span class="line"><span class="string">If the table argument is None, no translation is applied and</span></span><br><span class="line"><span class="string">the operation simply removes the characters in deletechars.</span></span><br><span class="line"><span class="string">这是translate的原始目的</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment">#the remaining characters have been mapped through the given</span></span><br><span class="line"><span class="comment">#translation table</span></span><br><span class="line"><span class="comment">#通过string.maketrans()得到映射table!!!!!!!!</span></span><br><span class="line"><span class="keyword">print</span> s.translate(string.maketrans(<span class="string">'abcxyz'</span>,<span class="string">'xyzabc'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># If the table argument is None, no translation is applied</span></span><br><span class="line"><span class="comment"># and the operation simply removes the characters in deletechars</span></span><br><span class="line">s = <span class="string">'abc\reesa\nrrt23\t'</span></span><br><span class="line"><span class="keyword">print</span> s.translate(<span class="literal">None</span>,<span class="string">'\r\n\t'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####### unicode #######</span></span><br><span class="line"><span class="comment">#def translate(self, table)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">S.translate(table) -&gt; unicode</span></span><br><span class="line"><span class="string">Return a copy of the string S, where all characters have been mapped</span></span><br><span class="line"><span class="string">through the given translation table, which must be a mapping of</span></span><br><span class="line"><span class="string">Unicode ordinals to Unicode ordinals, Unicode strings or None.</span></span><br><span class="line"><span class="string">Unmapped characters are left untouched. </span></span><br><span class="line"><span class="string">Characters mapped to None are deleted.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment">#Characters mapped to None are deleted.</span></span><br><span class="line">u = <span class="string">u'hahaǔǜhaha'</span></span><br><span class="line"><span class="keyword">print</span> u.translate(&#123;<span class="number">0x01d4</span>:<span class="literal">None</span>,<span class="number">0x01dc</span>:<span class="literal">None</span>&#125;) <span class="comment"># 0x01d4是ǔ  0x01dc是ǜ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># def fromkeys(S, v=None): restored from __doc__</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.</span></span><br><span class="line"><span class="string">v defaults to None.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment">#v defaults to None.</span></span><br><span class="line"><span class="keyword">print</span> dict.fromkeys([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">u = <span class="string">u'12345'</span></span><br><span class="line"><span class="keyword">print</span> u.translate(dict.fromkeys([<span class="number">0x0031</span>,<span class="number">0x0032</span>,<span class="number">0x0033</span>,<span class="number">0x0034</span>]))  <span class="comment">#0x0031是1</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/28/Python%E6%8A%80%E5%B7%A7-%E5%AF%B9%E8%B1%A1%E8%BF%AD%E4%BB%A3%E4%B8%8E%E5%8F%8D%E8%BF%AD%E4%BB%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/28/Python%E6%8A%80%E5%B7%A7-%E5%AF%B9%E8%B1%A1%E8%BF%AD%E4%BB%A3%E4%B8%8E%E5%8F%8D%E8%BF%AD%E4%BB%A3/" class="post-title-link" itemprop="url">Python技巧:对象迭代与反迭代</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-28 22:03:52" itemprop="dateCreated datePublished" datetime="2018-02-28T22:03:52+08:00">2018-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="实现可迭代对象和迭代器"><a href="#实现可迭代对象和迭代器" class="headerlink" title="实现可迭代对象和迭代器"></a>实现可迭代对象和迭代器</h3><ol>
<li><p>实例化iter()<br>由可迭代对象得到迭代器<br>通过给iter()传入可迭代对象(也就是实例化iter这个对象),得到迭代器对象<br>可迭代对象:列表,字符串,元组,字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#iter()的定义中:the argument must supply its own iterator, or be a sequence.</span></span><br><span class="line"><span class="comment">#说明了要么自己是个可迭代对象,要么是一个序列</span></span><br><span class="line"></span><br><span class="line">l = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">45</span>]</span><br><span class="line"><span class="comment">#使用 iter(l)相当于在内部调用 l.__iter__()</span></span><br><span class="line"><span class="keyword">print</span> l.__iter__() <span class="comment">#&lt;listiterator object at 0x0000000004B90E10&gt;</span></span><br><span class="line"><span class="keyword">print</span> l.next()</span><br><span class="line"><span class="keyword">print</span> l.next()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = <span class="string">'abcde'</span></span><br><span class="line"><span class="comment">#对于字符串来说并没有__iter__()方法,但是有__getitem__()方法</span></span><br><span class="line"><span class="keyword">print</span> s.__getitem__ <span class="comment">#&lt;method-wrapper '__getitem__' of str object at 0x00000000050D20A8&gt;</span></span><br><span class="line"><span class="keyword">print</span> s.__getitem__(<span class="number">0</span>)  <span class="comment">#a</span></span><br><span class="line"><span class="keyword">print</span> s.__getitem__(<span class="number">1</span>)  <span class="comment">#b</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>继承迭代器Iterator,实现next()方法(接口)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherIterator</span><span class="params">(Iterator)</span>:</span> <span class="comment">#(继承迭代器)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,cities)</span>:</span></span><br><span class="line">        self.cities = cities</span><br><span class="line">        self.index = <span class="number">-1</span></span><br><span class="line">    <span class="comment">#实现next()接口</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.index += <span class="number">1</span> <span class="comment">#保证向下进行</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"-----"</span>, self.index</span><br><span class="line">        <span class="keyword">if</span> self.index == len(self.cities):</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line">        <span class="comment"># city = self.cities[self.index]</span></span><br><span class="line">        <span class="keyword">return</span> self.getWeather()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getWeather</span><span class="params">(self)</span>:</span></span><br><span class="line">        r = requests.get(<span class="string">u'http://api.yytianqi.com/observe?city=CH0%s0100&amp;key=2t9cbchuhmjfhdrw'</span> % self.cities[self.index])</span><br><span class="line">        t = json.loads(r.text)</span><br><span class="line">        <span class="keyword">return</span> t[<span class="string">'data'</span>][<span class="string">'cityName'</span>], t[<span class="string">'data'</span>][<span class="string">'qw'</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>继承可迭代对象Iterable,实现 <strong>iter</strong>()接口(方法)</p>
</li>
</ol>
<h3 id="使用生成器函数实现可迭代对象"><a href="#使用生成器函数实现可迭代对象" class="headerlink" title="使用生成器函数实现可迭代对象"></a>使用生成器函数实现可迭代对象</h3><p><strong>什么是生成器函数? 调用yield语句的函数就是生成器函数</strong><br><strong>生成器和迭代器都支持.next()接口</strong>  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line">t = f()</span><br><span class="line"><span class="comment">#注意! 不是f.next(),f是指向函数这个整体,或说指向函数的地址,所以应该用f().next()</span></span><br><span class="line"><span class="comment">#无论用几次f().next(),打印出来的都是1,因为每次使用f()时都是重新创建的对象,而不是之前那个f()</span></span><br><span class="line"><span class="comment">#所以想实现真正的next()得先用一个变量指向某个实例对象,eg:t = f()</span></span><br><span class="line"><span class="comment"># print f().next(),f().next()</span></span><br><span class="line"><span class="comment"># print t.next()</span></span><br><span class="line"><span class="comment"># print t.next()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#生成器对象也是可迭代的</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> t:</span><br><span class="line">    <span class="keyword">print</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment">#既然t是可迭代的,说明t实现了__iter__()接口</span></span><br><span class="line"><span class="comment">#t.__iter__()返回值是t自身,打印下式返回true</span></span><br><span class="line"><span class="keyword">print</span> t.__iter__() <span class="keyword">is</span> t</span><br><span class="line"><span class="comment">#生成器yield实现了可迭代对象接口 .__iter__()</span></span><br><span class="line"><span class="comment">#生成器yield也实现了迭代器接口 .next()</span></span><br></pre></td></tr></table></figure>

<h3 id="反向迭代与实现反向迭代"><a href="#反向迭代与实现反向迭代" class="headerlink" title="反向迭代与实现反向迭代"></a>反向迭代与实现反向迭代</h3><ol>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">l.reverse() <span class="comment">#这样相当于是改变了原列表</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> l:</span><br><span class="line">    <span class="keyword">print</span> x</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用带步进值的切片操作,需要使用额外的空间</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> l[::<span class="number">-1</span>]:</span><br><span class="line">    <span class="keyword">print</span> x</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用内置函数reversed()得到反向迭代器</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> reversed(l):</span><br><span class="line">    <span class="keyword">print</span> x</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现<strong>reversed</strong>()接口,类似<strong>iter</strong>()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FloatRange</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,start,end,step=<span class="number">0.1</span>)</span>:</span></span><br><span class="line">        self.start = start</span><br><span class="line">        self.end = end</span><br><span class="line">        self.step = step</span><br><span class="line">    <span class="comment">#实现正向迭代器</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        t = self.start</span><br><span class="line">        <span class="keyword">while</span> t &lt;= self.end:</span><br><span class="line">            <span class="keyword">yield</span> t</span><br><span class="line">            t+=self.step</span><br><span class="line">    <span class="comment">#实现反向迭代器</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__reversed__</span><span class="params">(self)</span>:</span></span><br><span class="line">        t = self.end</span><br><span class="line">        <span class="keyword">while</span> t&gt;= self.start:</span><br><span class="line">            <span class="keyword">yield</span> t</span><br><span class="line">            t-=self.step</span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line"><span class="comment">#正向迭代器(默认是正向的)</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> FloatRange(<span class="number">1.0</span>,<span class="number">4.0</span>,<span class="number">0.5</span>):</span><br><span class="line">    <span class="keyword">print</span> x</span><br><span class="line"><span class="comment">#反向迭代器,reversed()接收一个Iterable对象</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> reversed(FloatRange(<span class="number">1.0</span>,<span class="number">4.0</span>,<span class="number">0.5</span>)):</span><br><span class="line">    <span class="keyword">print</span> x</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="对迭代器Iterator做切片操作"><a href="#对迭代器Iterator做切片操作" class="headerlink" title="对迭代器Iterator做切片操作"></a>对迭代器Iterator做切片操作</h3><p>使用itertools中的islice</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</span><br><span class="line"><span class="comment">#islice(iterable, [start,] stop [, step])</span></span><br><span class="line">f = open(<span class="string">'a.txt'</span>,<span class="string">'r'</span>)</span><br><span class="line"><span class="keyword">print</span> type(islice(f,<span class="number">100</span>,<span class="number">150</span>))</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> islice(f,<span class="number">100</span>,<span class="number">150</span>):</span><br><span class="line">    <span class="keyword">print</span> line</span><br><span class="line"><span class="comment">#只有一个100,则代表stop值</span></span><br><span class="line"><span class="comment">#将文件指针移动到开头</span></span><br><span class="line">f.seek(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> islice(f,<span class="number">100</span>):</span><br><span class="line">    <span class="keyword">print</span> line</span><br><span class="line">f.seek(<span class="number">0</span>)</span><br><span class="line"><span class="comment">#从100到结尾!!</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> islice(f,<span class="number">100</span>,<span class="literal">None</span>):</span><br><span class="line">    <span class="keyword">print</span> line</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</span><br><span class="line"><span class="comment">#range():Return a list containing an arithmetic progression of integers.</span></span><br><span class="line">l = range(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">print</span> type(l)</span><br><span class="line"><span class="comment">#iter() Get an iterator from an object</span></span><br><span class="line">t =iter(l)</span><br><span class="line"><span class="comment">#对l索引值为5--9的元素进行遍历</span></span><br><span class="line"><span class="comment"># 注意!索引值为0--4的元素先被迭代器产生,但是没有符合索引值范围,所以并没有使用</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> islice(t,<span class="number">5</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">print</span> x</span><br><span class="line"><span class="keyword">print</span> <span class="string">"-----------------"</span></span><br><span class="line"><span class="comment">#使用islice()对迭代器有消耗,也就是说,产生过的元素不再参与迭代</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> t:</span><br><span class="line">    <span class="keyword">print</span> x</span><br><span class="line"><span class="comment"># 所以使用islice时要随时注意重新申请新的迭代对象,因为它会消耗原来的对象</span></span><br><span class="line"><span class="comment"># 但是直接用l没有关系,因为l是list类型, list调用__iter__(self)接口后返回一个可迭代对象,相当于t</span></span><br><span class="line"><span class="comment"># 这样相当于每次都创建新的可迭代对象,但是l占用空间大,有几个元素就占几个元素的空间,迭代器占用少,用到几个占用几个</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> l:</span><br><span class="line">    <span class="keyword">print</span> x</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/27/Python%E6%8A%80%E5%B7%A7-List-Tuple-Dict-Set/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/27/Python%E6%8A%80%E5%B7%A7-List-Tuple-Dict-Set/" class="post-title-link" itemprop="url">Python技巧:List,Tuple,Dict,Set</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-27 16:16:42" itemprop="dateCreated datePublished" datetime="2018-02-27T16:16:42+08:00">2018-02-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>自己最近主要是用Python,还不是很扎实,学习了程序员硕的Python高效编程技巧实战,讲得很好,感觉受益匪浅,故分享一下心得</p>
<h3 id="在列表List-字典Dict-集合Set中根据条件筛选数据"><a href="#在列表List-字典Dict-集合Set中根据条件筛选数据" class="headerlink" title="在列表List,字典Dict,集合Set中根据条件筛选数据"></a>在列表List,字典Dict,集合Set中根据条件筛选数据</h3><p>使用各自的生成式即可<br><strong>产生相同的列表,列表表达式速度比过滤函数快!!将近一倍. 这两种方法都远远快于for循环</strong><br>过滤函数定义: filter(function or None, sequence) -&gt; list, tuple, or string<br><img src="https://upload-images.jianshu.io/upload_images/9608551-e7e865d0c54c2e0c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="21.jpg"></p>
<h3 id="为每个元组Tuple中的元素命名-提高程序可读性"><a href="#为每个元组Tuple中的元素命名-提高程序可读性" class="headerlink" title="为每个元组Tuple中的元素命名,提高程序可读性"></a>为每个元组Tuple中的元素命名,提高程序可读性</h3><ol>
<li><p><strong>定义类似于其它语言的枚举类型,也就是定义一系列数值常量</strong> </p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME = <span class="number">0</span>  </span><br><span class="line">AGE = <span class="number">1</span>  </span><br><span class="line">EMAL = <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p> 或者 </p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NAME,AGE,EMAIL = range(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p> 具体使用</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s1 = (<span class="string">'haes'</span>,<span class="number">16</span>,<span class="string">'5065@qq.com'</span>)</span><br><span class="line"><span class="keyword">print</span> s1[AGE]</span><br></pre></td></tr></table></figure>
<p> 这么使用得提前设计好数据结构  </p>
</li>
<li><p><strong>使用collections.namedtuple替代内置tuple</strong><br> 先实例化一个namedtuple对象,这个对象和tuple的地位一样,只不过带名字(名字就是这个对象的各个属性)</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple  </span><br><span class="line">student = namedtuple(<span class="string">'s1'</span>,[<span class="string">'NAME'</span>,<span class="string">'AGE'</span>,<span class="string">'EMAIL'</span>])  </span><br><span class="line">s = student(<span class="string">'haes'</span>,<span class="number">16</span>,<span class="string">'5065@qq.com'</span>)  </span><br><span class="line"><span class="keyword">print</span> s.NAME  </span><br><span class="line"><span class="keyword">print</span> isinstance(s,tuple) <span class="comment">#Ture</span></span><br></pre></td></tr></table></figure>
<h3 id="统计序列sequence中元素的出现次数"><a href="#统计序列sequence中元素的出现次数" class="headerlink" title="统计序列sequence中元素的出现次数"></a>统计序列sequence中元素的出现次数</h3></li>
<li><p>使用sorted函数  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#比如:按字典的值排序</span></span><br><span class="line">new_c = sorted(c.items(),key=<span class="keyword">lambda</span> x :x[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用collections.Counter对象<br> 将序列sequence传入Counter的构造函数,得到Counter对象是元素出现次数的字典<br> Counter.most_common(n)方法得到出现次数最多的前n个元素的列表</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">new_c = Counter(data)</span><br><span class="line"><span class="keyword">print</span> new_c[<span class="number">3</span>] <span class="comment">#data中索引为3的元素出现的次数</span></span><br><span class="line"><span class="keyword">print</span> new_c.most_common(<span class="number">4</span>) <span class="comment">#[(10, 4)说明10出现了4次</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="根据字典值的大小-对字典的项排序"><a href="#根据字典值的大小-对字典的项排序" class="headerlink" title="根据字典值的大小,对字典的项排序"></a>根据字典值的大小,对字典的项排序</h3><ol>
<li><p>使用sorted函数</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line">d = &#123;x:randint(<span class="number">60</span>,<span class="number">100</span>) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">'xyzabc'</span> &#125;</span><br><span class="line"><span class="comment">#直接排序是对字典的键排序,因为默认是对各项的第一个元素排序,元组也是</span></span><br><span class="line"><span class="keyword">print</span> sorted(d )</span><br><span class="line"><span class="comment">#&lt;dictionary-keyiterator object at 0x00000000066742C8&gt;</span></span><br><span class="line"><span class="keyword">print</span> iter(d)</span><br><span class="line"><span class="comment">#可以通过list看看具体的迭代对象是什么</span></span><br><span class="line"><span class="keyword">print</span> list(iter(d))</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用sorted函数的key参数</span></span><br><span class="line">b = &#123;x:randint(<span class="number">60</span>,<span class="number">100</span>) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)&#125;</span><br><span class="line"><span class="comment">#根据value排序和对value排序是两个不同的概念!!!!</span></span><br><span class="line">new_b1 = sorted(b.items(),key=<span class="keyword">lambda</span> x:x[<span class="number">1</span>])</span><br><span class="line">new_b2 = sorted(b.values())</span><br><span class="line">new_b3 = sorted(b)</span><br><span class="line"><span class="keyword">print</span> new_b1</span><br><span class="line"><span class="keyword">print</span> new_b2</span><br><span class="line"><span class="keyword">print</span> new_b3</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用zip函数将字典数据转化元组  </p>
</li>
</ol>
<p><strong>根据value排序和对value排序是两个不同的概念</strong><br>zip(seq1, seq2, *more_seqs) 返回的是元组  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#zip的使用</span></span><br><span class="line">new_d = zip(d.values(),d.keys())</span><br><span class="line"><span class="comment">#使用迭代版本的key和value节约空间!!!!</span></span><br><span class="line">new_D = zip(d.itervalues(),d.iterkeys())</span><br><span class="line"><span class="keyword">print</span> new_D</span><br><span class="line"><span class="comment">#将value放在第一个位置,这样就可以按照value排序了</span></span><br><span class="line"><span class="keyword">print</span> sorted(new_D)</span><br></pre></td></tr></table></figure>
<h3 id="查找多个字典的公共键"><a href="#查找多个字典的公共键" class="headerlink" title="查找多个字典的公共键"></a>查找多个字典的公共键</h3><p>step1. 使用字典的viewkeys()方法,得到一个字典keys的集合set<br>step2. 使用map函数,得到所有字典的keys的集合<br>step3. 使用reduce函数,得到所有字典的集合的交集set  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint,sample</span><br><span class="line"><span class="comment">#先随机生成4个字典</span></span><br><span class="line"><span class="comment">#def sample(self, population, k):</span></span><br><span class="line"><span class="comment">#Chooses k unique random elements from a population sequence.</span></span><br><span class="line"><span class="comment">#sample:从population序列里面随机选取k个</span></span><br><span class="line"><span class="keyword">print</span> sample(<span class="string">'abcdefg'</span>,randint(<span class="number">3</span>,<span class="number">6</span>))</span><br><span class="line">s1 = &#123;k:randint(<span class="number">0</span>,<span class="number">5</span>) <span class="keyword">for</span> k <span class="keyword">in</span> sample(<span class="string">'abcdefg'</span>,randint(<span class="number">3</span>,<span class="number">6</span>)) &#125;</span><br><span class="line">s2 = &#123;k:randint(<span class="number">0</span>,<span class="number">5</span>) <span class="keyword">for</span> k <span class="keyword">in</span> sample(<span class="string">'abcdefg'</span>,randint(<span class="number">3</span>,<span class="number">6</span>)) &#125;</span><br><span class="line">s3 = &#123;k:randint(<span class="number">0</span>,<span class="number">5</span>) <span class="keyword">for</span> k <span class="keyword">in</span> sample(<span class="string">'abcdefg'</span>,randint(<span class="number">3</span>,<span class="number">6</span>)) &#125;</span><br><span class="line">s4 = &#123;k:randint(<span class="number">0</span>,<span class="number">5</span>) <span class="keyword">for</span> k <span class="keyword">in</span> sample(<span class="string">'abcdef'</span>,randint(<span class="number">3</span>,<span class="number">6</span>))&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># print s1.viewkeys() &amp; s2.viewkeys() &amp; s3.viewkeys()</span></span><br><span class="line"><span class="comment">#map对每个元素执行相同的操作</span></span><br><span class="line">s = map(dict.viewkeys,[s1,s2,s3])</span><br><span class="line"><span class="comment">#def reduce(function, sequence, initial=None)</span></span><br><span class="line"><span class="keyword">print</span> reduce(<span class="keyword">lambda</span> a,b:a &amp; b,s)</span><br><span class="line"></span><br><span class="line"><span class="comment">#用lambda也行</span></span><br><span class="line"><span class="comment"># s = map(lambda x : x.viewkeys(),[s1,s2,s3])</span></span><br><span class="line"><span class="comment"># print reduce(lambda a,b:a &amp; b,s)</span></span><br></pre></td></tr></table></figure>

<h3 id="让字典保持有序"><a href="#让字典保持有序" class="headerlink" title="让字典保持有序"></a>让字典保持有序</h3><p>使用collections中的有序字典OrderedDict</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#实例化一个OrderedDict对象,然后赋值即可</span></span><br><span class="line"><span class="comment">#先插入的值排在前面</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line">d = OrderedDict()</span><br><span class="line">d[<span class="string">'Bob'</span>] = <span class="number">1</span></span><br><span class="line">d[<span class="string">'Jim'</span>] = <span class="number">21</span></span><br><span class="line">d[<span class="string">'Leo'</span>] = <span class="number">-100</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> d: </span><br><span class="line">    <span class="keyword">print</span> k</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#模拟跑步排名,先记录的说明成绩靠前</span></span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line">players = list(<span class="string">'ABCDEFGH'</span>)</span><br><span class="line">start = time()</span><br><span class="line">d = OrderedDict()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">8</span>):</span><br><span class="line">    raw_input()</span><br><span class="line">    <span class="comment">#pop还能这么用</span></span><br><span class="line">    p = players.pop(randint(<span class="number">0</span>,<span class="number">7</span>-i))</span><br><span class="line">    end = time()</span><br><span class="line">    <span class="keyword">print</span> i+<span class="number">1</span>,p,end-start</span><br><span class="line">    d[p] = (i+<span class="number">1</span>,end-start)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"------------------------------------------"</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> d: <span class="keyword">print</span> k,d[k]</span><br></pre></td></tr></table></figure>

<h3 id="实现用户的历史记录功能"><a href="#实现用户的历史记录功能" class="headerlink" title="实现用户的历史记录功能"></a>实现用户的历史记录功能</h3><p>使用collections中的deque,它是一个双端循环队列<br>程序退出前可以使用pickle将队列对象存入文件,再次运行程序时将其导入  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="comment"># deque 双端队列</span></span><br><span class="line"><span class="comment">#def __init__(self, iterable=(), maxlen=None)</span></span><br><span class="line"><span class="comment">#最多存5条,超过5条会把最开始的删掉,从而保持deque的容量为5</span></span><br><span class="line">q = deque([],<span class="number">5</span>)</span><br><span class="line">q.append(<span class="number">1</span>)</span><br><span class="line">q.append(<span class="number">2</span>)</span><br><span class="line">q.append(<span class="number">3</span>)</span><br><span class="line">q.append(<span class="number">4</span>)</span><br><span class="line">q.append(<span class="number">5</span>)</span><br><span class="line">q.append(<span class="number">6</span>)</span><br><span class="line"><span class="keyword">print</span> q</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#模拟猜数</span></span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">N = randint(<span class="number">0</span>,<span class="number">100</span>)</span><br><span class="line">history = deque([],<span class="number">5</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">guess</span><span class="params">(k)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> k==N:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'right'</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> k&lt;N:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'%s is less than N'</span>%k</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'%s is greater than N'</span>%k</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    line = raw_input(<span class="string">'plz input a number: '</span>)</span><br><span class="line">    <span class="keyword">if</span> line.isdigit():</span><br><span class="line">        k = int(line)</span><br><span class="line">        history.append(k)</span><br><span class="line">        <span class="keyword">if</span> guess(k):</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">elif</span> line == <span class="string">'check'</span>:</span><br><span class="line">        <span class="keyword">print</span> list(history)</span><br><span class="line"></span><br><span class="line">pickle.dump(history,open(<span class="string">'test.txt'</span>,<span class="string">'wb'</span>))</span><br><span class="line">p = pickle.load(open(<span class="string">'test.txt'</span>,<span class="string">'rb'</span>))</span><br><span class="line"><span class="keyword">print</span> p</span><br><span class="line"><span class="keyword">print</span> list(p)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/26/jieba%E5%88%86%E8%AF%8D%E8%AF%8D%E6%80%A7%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/26/jieba%E5%88%86%E8%AF%8D%E8%AF%8D%E6%80%A7%E8%A1%A8/" class="post-title-link" itemprop="url">jieba分词词性表</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-26 09:53:19" itemprop="dateCreated datePublished" datetime="2018-02-26T09:53:19+08:00">2018-02-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <table>
<thead>
<tr>
<th align="center">sign</th>
<th align="center">correspondence</th>
<th align="center">explanation</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Ag</td>
<td align="center">形语素</td>
<td align="center">形容词性语素。形容词代码为 a，语素代码ｇ前面置以A。</td>
</tr>
<tr>
<td align="center">a</td>
<td align="center">形容词</td>
<td align="center">取英语形容词 adjective的第1个字母。</td>
</tr>
<tr>
<td align="center">ad</td>
<td align="center">副形词</td>
<td align="center">直接作状语的形容词。形容词代码 a和副词代码d并在一起。</td>
</tr>
<tr>
<td align="center">an</td>
<td align="center">名形词</td>
<td align="center">具有名词功能的形容词。形容词代码 a和名词代码n并在一起。</td>
</tr>
<tr>
<td align="center">b</td>
<td align="center">区别词</td>
<td align="center">取汉字“别”的声母。</td>
</tr>
<tr>
<td align="center">c</td>
<td align="center">连词</td>
<td align="center">取英语连词 conjunction的第1个字母。</td>
</tr>
<tr>
<td align="center">dg</td>
<td align="center">副语素</td>
<td align="center">副词性语素。副词代码为 d，语素代码ｇ前面置以D。</td>
</tr>
<tr>
<td align="center">d</td>
<td align="center">副词</td>
<td align="center">取 adverb的第2个字母，因其第1个字母已用于形容词。</td>
</tr>
<tr>
<td align="center">e</td>
<td align="center">叹词</td>
<td align="center">取英语叹词 exclamation的第1个字母。</td>
</tr>
<tr>
<td align="center">f</td>
<td align="center">方位词</td>
<td align="center">取汉字“方”</td>
</tr>
<tr>
<td align="center">g</td>
<td align="center">语素</td>
<td align="center">绝大多数语素都能作为合成词的“词根”，取汉字“根”的声母。</td>
</tr>
<tr>
<td align="center">h</td>
<td align="center">前接成分</td>
<td align="center">取英语 head的第1个字母。</td>
</tr>
<tr>
<td align="center">i</td>
<td align="center">成语</td>
<td align="center">取英语成语 idiom的第1个字母。</td>
</tr>
<tr>
<td align="center">j</td>
<td align="center">简称略语</td>
<td align="center">取汉字“简”的声母。</td>
</tr>
<tr>
<td align="center">k</td>
<td align="center">后接成分</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">l</td>
<td align="center">习用语</td>
<td align="center">习用语尚未成为成语，有点“临时性”，取“临”的声母。</td>
</tr>
<tr>
<td align="center">m</td>
<td align="center">数词</td>
<td align="center">取英语 numeral的第3个字母，n，u已有他用。</td>
</tr>
<tr>
<td align="center">Ng</td>
<td align="center">名语素</td>
<td align="center">名词性语素。名词代码为 n，语素代码ｇ前面置以N。</td>
</tr>
<tr>
<td align="center">n</td>
<td align="center">名词</td>
<td align="center">取英语名词 noun的第1个字母。</td>
</tr>
<tr>
<td align="center">nr</td>
<td align="center">人名</td>
<td align="center">名词代码 n和“人(ren)”的声母并在一起。</td>
</tr>
<tr>
<td align="center">ns</td>
<td align="center">地名</td>
<td align="center">名词代码 n和处所词代码s并在一起。</td>
</tr>
<tr>
<td align="center">nt</td>
<td align="center">机构团体</td>
<td align="center">“团”的声母为 t，名词代码n和t并在一起。</td>
</tr>
<tr>
<td align="center">nz</td>
<td align="center">其他专名</td>
<td align="center">“专”的声母的第 1个字母为z，名词代码n和z并在一起。</td>
</tr>
<tr>
<td align="center">o</td>
<td align="center">拟声词</td>
<td align="center">取英语拟声词 onomatopoeia的第1个字母。</td>
</tr>
<tr>
<td align="center">p</td>
<td align="center">介词</td>
<td align="center">取英语介词 prepositional的第1个字母。</td>
</tr>
<tr>
<td align="center">q</td>
<td align="center">量词</td>
<td align="center">取英语 quantity的第1个字母。</td>
</tr>
<tr>
<td align="center">r</td>
<td align="center">代词</td>
<td align="center">取英语代词 pronoun的第2个字母,因p已用于介词。</td>
</tr>
<tr>
<td align="center">s</td>
<td align="center">处所词</td>
<td align="center">取英语 space的第1个字母。</td>
</tr>
<tr>
<td align="center">tg</td>
<td align="center">时语素</td>
<td align="center">时间词性语素。时间词代码为 t,在语素的代码g前面置以T。</td>
</tr>
<tr>
<td align="center">t</td>
<td align="center">时间词</td>
<td align="center">取英语 time的第1个字母。</td>
</tr>
<tr>
<td align="center">u</td>
<td align="center">助词</td>
<td align="center">取英语助词 auxiliary</td>
</tr>
<tr>
<td align="center">vg</td>
<td align="center">动语素</td>
<td align="center">动词性语素。动词代码为 v。在语素的代码g前面置以V。</td>
</tr>
<tr>
<td align="center">v</td>
<td align="center">动词</td>
<td align="center">取英语动词 verb的第一个字母。</td>
</tr>
<tr>
<td align="center">vd</td>
<td align="center">副动词</td>
<td align="center">直接作状语的动词。动词和副词的代码并在一起。</td>
</tr>
<tr>
<td align="center">vn</td>
<td align="center">名动词</td>
<td align="center">指具有名词功能的动词。动词和名词的代码并在一起。</td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">标点符号</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">x</td>
<td align="center">非语素字</td>
<td align="center">非语素字只是一个符号，字母 x通常用于代表未知数、符号。</td>
</tr>
<tr>
<td align="center">y</td>
<td align="center">语气词</td>
<td align="center">取汉字“语”的声母。 z  状态词  取汉字“状”的声母的前一个字母。</td>
</tr>
<tr>
<td align="center">un</td>
<td align="center">未知词</td>
<td align="center">不可识别词及用户自定义词组。取英文Unkonwn首两个字母。(非北大标准，CSW分词中定义)</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/25/Deep-Learning-for-Event-Driven-Stock-Prediction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/25/Deep-Learning-for-Event-Driven-Stock-Prediction/" class="post-title-link" itemprop="url">Deep Learning for Event-Driven Stock Prediction</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-25 16:52:13" itemprop="dateCreated datePublished" datetime="2018-02-25T16:52:13+08:00">2018-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Proceedings of the Twenty-Fourth International Joint Conference on Artificial Intelligence (IJCAI 2015)<br>文章提出了基于深度学习的事件驱动股市预测.<br>主要有两点:     </p>
<ol>
<li>使用论文中的神经网络(下图一)把新闻文本中的事件训练成dense vectors  </li>
<li>使用CNN把之前到现在的事件糅合起来预测股票价格的变化,也就是说同时考虑了之前的事件对现在的影响</li>
</ol>
<p>在对event进行embedding时融合了句子的结构信息,主谓宾以及主语和宾语之间的关系,主语和宾语之间的关系需要单独获得,具体参考:Using Structured Events to Predict Stock Price Movement:<br>An Empirical Investigation</p>
<p>NTN:<br><img src="http://upload-images.jianshu.io/upload_images/9608551-526d7024a6d2fe71.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="ntn.png">  </p>
<p>CNN for prediction<br><img src="http://upload-images.jianshu.io/upload_images/9608551-406b1803d0ffbeb2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="CNN-prediction.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/23/Win10%E5%90%AF%E7%94%A8SSH%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/23/Win10%E5%90%AF%E7%94%A8SSH%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="post-title-link" itemprop="url">Win10启用SSH连接服务器</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-23 10:24:22" itemprop="dateCreated datePublished" datetime="2018-02-23T10:24:22+08:00">2018-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>新版win10已经支持直接连接远程服务器了,很方便,只需三步!</p>
<h3 id="设置→更新和安全→针对开发人员→开发人员模式"><a href="#设置→更新和安全→针对开发人员→开发人员模式" class="headerlink" title="设置→更新和安全→针对开发人员→开发人员模式"></a>设置→更新和安全→针对开发人员→开发人员模式</h3><p><img src="http://upload-images.jianshu.io/upload_images/9608551-ec223f6729197cd2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="00.png"></p>
<h3 id="控制面板→程序→启用或关闭Windows功能"><a href="#控制面板→程序→启用或关闭Windows功能" class="headerlink" title="控制面板→程序→启用或关闭Windows功能"></a>控制面板→程序→启用或关闭Windows功能</h3><p><img src="http://upload-images.jianshu.io/upload_images/9608551-3b7c5f1fc9d65c5a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="11.png">  </p>
<p><strong>选择”适用于Linux的Windows子系统”</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/9608551-0ae8748249068ca4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="22.png"></p>
<h3 id="安装ubuntu"><a href="#安装ubuntu" class="headerlink" title="安装ubuntu"></a>安装ubuntu</h3><p>在地址栏中输入:<a href="https://aka.ms/wslstore" target="_blank" rel="noopener">https://aka.ms/wslstore</a><br>会自动弹出windows应用商店,下载ubuntu,<br>不到200M,然后安装,过程中需要设置用户名和密码,安装完成后直接使用即可<br><img src="http://upload-images.jianshu.io/upload_images/9608551-e59a00b7dde5d9ab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="33.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/22/Convex-Set-and-Convex-Function%E5%87%B8%E9%9B%86%E4%B8%8E%E5%87%B8%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/22/Convex-Set-and-Convex-Function%E5%87%B8%E9%9B%86%E4%B8%8E%E5%87%B8%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">Convex Set and Convex Function凸集与凸函数</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-22 21:28:41" itemprop="dateCreated datePublished" datetime="2018-02-22T21:28:41+08:00">2018-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Rockafeller说:”优化问题的分水岭不是线性和非线性,而是凸性和非凸性”</p>
<h2 id="两点连线上的点"><a href="#两点连线上的点" class="headerlink" title="两点连线上的点"></a>两点连线上的点</h2><p>在介绍凸集和凸函数之前,先来看一个与之有关的基本问题:<br>如下图,已知空间中有B,C两点,在给定两点坐标的情况下如何量化B,C连线上的任意一点D?  </p>
<p><img src="http://upload-images.jianshu.io/upload_images/9608551-588318532c20bd8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="0.png">  </p>
<p>很简单,看下图,设已知A,B,C,D的坐标,<br>AD  = AB + BD<br>= AB + kBC  (D在BC上,所以k∈[0,1])<br>= AB + k(AC - AB)<br>= kAC + (1-k)AB<br>(以上均为向量运算)  </p>
<p><img src="http://upload-images.jianshu.io/upload_images/9608551-98e8972c736cce83.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="1.png">  </p>
<p>所以,已知空间中有两点X,Y,那么线段XY上的任意一点可以表示为kX + (1-k)Y,其中k∈[0,1]</p>
<h2 id="凸集"><a href="#凸集" class="headerlink" title="凸集"></a>凸集</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>若集合S⊆Rⁿ满足<br>αx + (1 - α)y ∈ S,  ∀x,y ∈ S,  ∀α ∈ [0,1]<br>则称S是Rⁿ中的凸集.<br>(当α没有限制时,α为直线xy上的任意点,此时S是仿射集)</p>
<h3 id="几何解释"><a href="#几何解释" class="headerlink" title="几何解释"></a>几何解释</h3><p>从几何的角度可以这么理解,如果凸集S包含x,y两点,那么线段xy都在S中,如下图<br>左边的椭圆是凸集,右边的四角星不是凸集<br><img src="http://upload-images.jianshu.io/upload_images/9608551-14dde96cdb2fd9cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="2.png">  </p>
<h2 id="凸函数"><a href="#凸函数" class="headerlink" title="凸函数"></a>凸函数</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><h4 id="凸函数-1"><a href="#凸函数-1" class="headerlink" title="凸函数"></a>凸函数</h4><p>设S⊆Rⁿ是凸集. 若函数f : Rⁿ → Rⁿ满足<br>f[αx + (1-α)y] ≤ αf(x) + (1-α)f(y), ∀x,y ∈ S, ∀α ∈[0,1]<br>则称f是S上的凸函数</p>
<h4 id="严格凸函数"><a href="#严格凸函数" class="headerlink" title="严格凸函数"></a>严格凸函数</h4><p>接凸函数,若不等式<br>f[αx + (1-α)y] ≤ αf(x) + (1-α)f(y), ∀x,y ∈ S, ∀α ∈[0,1]<br>对所有 x≠ y和 α∈(0,1)成立,则称f是S上的严格凸函数</p>
<h4 id="一致凸函数-强凸函数"><a href="#一致凸函数-强凸函数" class="headerlink" title="一致凸函数(强凸函数)"></a>一致凸函数(强凸函数)</h4><p>接凸函数,若存在常熟 m&gt;0, 使不等式<br>f[αx + (1-α)y] ≤ αf(x) + (1-α)f(y) - mα(1-α)||x-y||² 对所有x,y∈S以及所有α∈[0,1]成立,则称f是S上的一致凸函数(强凸函数)</p>
<h3 id="几何解释-1"><a href="#几何解释-1" class="headerlink" title="几何解释"></a>几何解释</h3><ol>
<li>任意一点的切线都在图像下方(图像像个碗)  </li>
<li>任意两点确定的弦在其图像上方  </li>
</ol>
<p>其实,横坐标为αx + (1-α)y时,对应弦AB上点的纵坐标就是αf(x) + (1-α)f(y)<br><img src="http://upload-images.jianshu.io/upload_images/9608551-51c8c600edc90fcc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="3.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/21/SVD%E4%B8%8EPCA%E7%9A%84%E8%81%94%E7%B3%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/21/SVD%E4%B8%8EPCA%E7%9A%84%E8%81%94%E7%B3%BB/" class="post-title-link" itemprop="url">SVD与PCA的联系</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-21 22:46:56" itemprop="dateCreated datePublished" datetime="2018-02-21T22:46:56+08:00">2018-02-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="最主要的一点"><a href="#最主要的一点" class="headerlink" title="最主要的一点:"></a>最主要的一点:</h3><ul>
<li>对矩阵进行PCA降维,一般是通过SVD实现的,而不是去计算原矩阵特征的协方差矩阵.</li>
<li>当前数据为p*n的矩阵X,n个样本,每个样本维度为p<ul>
<li>SVD: Xpn = UΣV^t</li>
<li>PCA: Xpn = App^t*Ypn (A是正交矩阵,由p个特征的协方差矩阵的单位特征向量构成;Y是在新维度下的数据表示)</li>
</ul>
</li>
<li>将SVD与PCA联系起来<ul>
<li>SVD: X*X^t = U*Σ*Σ^t*U^t (一)</li>
<li>PCA: X*X^t = A^t*Y*Y^t*A (二)</li>
<li>重点来了<br>我们可以看到,SVD和PCA的X*X^t展开式形式非常像!<br>不妨令 <strong>A^t = U</strong>,代回原X表达式<br>X = U*Σ*V^t = A^t*Y<br>可得 <strong>Y = Σ*V^t</strong><br>这说明只需一次SVD计算就可得到对应PCA的正交矩阵和在新维度下的数据Y, 稳!</li>
</ul>
</li>
</ul>
<h3 id="矩阵形式"><a href="#矩阵形式" class="headerlink" title="矩阵形式:"></a>矩阵形式:</h3><p><strong>在默认列向量这种表示方法下,α^t*β是标量(scalar),得敏感</strong><br> <img src="http://upload-images.jianshu.io/upload_images/9608551-a04fef9facf4c2fe.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="attention.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/20/SVD%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/20/SVD%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">SVD奇异值分解数学原理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-20 21:27:31" itemprop="dateCreated datePublished" datetime="2018-02-20T21:27:31+08:00">2018-02-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>推导完PCA再来看看SVD </p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ul>
<li>奇异值分解(singular value decomposition)可以分解任意形状的矩阵, PCA是对方阵操作,所以SVD适用范围更广</li>
<li><strong>A=UΣV^t</strong></li>
</ul>
<h3 id="具体推导"><a href="#具体推导" class="headerlink" title="具体推导"></a>具体推导</h3><h4 id="分解形式"><a href="#分解形式" class="headerlink" title="分解形式"></a>分解形式</h4><p>A是一个m*n的矩阵,那么A的SVD分解为Amn= Umm*Σmn*Vnn^t (Amn表示A是m*n的矩阵)<br>其中:</p>
<ul>
<li><p>Σ只在对角线(可能不同于方阵的对角线)上有非零值,称为A的奇异值(singular value),按降序排列,取值为 A*A^t 或者 A^t*A 的特征值的正平方根(取值不同可造成SVD分解形式的不唯一)</p>
</li>
<li><p>U和V都是正交矩阵,即满足U^t*U = E, V^t*V = E</p>
</li>
<li><p>A*A^t<br>= U*Σ*V^t*V*Σ^t*U^t<br>= U*Σ*Σ^t*U^t (Σ<em>Σ^t是对角矩阵)<br>所以,Σ\</em>Σ^t的对角元素是A*A^t的特征值,U是A*A^t的特征向量构成的正交矩阵</p>
</li>
<li><p>A^t*A<br>= V*Σ^t*U^t*U*Σ*V^t<br>= V*Σ^t*Σ*V^t<br>所以,Σ^t*Σ的对角元素是A^t*A的特征值,V是A^t*A的特征向量构成的正交矩阵</p>
</li>
</ul>
<h4 id="SVD分解展开式"><a href="#SVD分解展开式" class="headerlink" title="SVD分解展开式:"></a>SVD分解展开式:</h4><p><strong>不妨设m≥n</strong>,则有:<br>Amn<br>= Umm*Σmn*Vnn^t<br>= (u1,u2…um)*diag_like(d1,d2…dn)*(v1^t,v2^t…vn^t)^t<br>= Σdi*ui*vi^t       (i from 1 to n)<br>= Σdi*Zi       (令Zi=ui*vi^t,Zi也是m*n型)<br><img src="http://upload-images.jianshu.io/upload_images/9608551-30a591c31e77302e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="1.png"><br>所以,<strong>对A进行SVD分解,相当于把A分解为n个(m≥n时)Zi的加权和</strong>.<br><strong>di的大小评估了每个Zi对A的贡献,所以可以挑出大di,抛弃小di以实现降维的目的</strong></p>
<h3 id="SVD的应用"><a href="#SVD的应用" class="headerlink" title="SVD的应用"></a>SVD的应用</h3><h4 id="信息压缩"><a href="#信息压缩" class="headerlink" title="信息压缩"></a>信息压缩</h4><ul>
<li>取前r大的奇异值di,来近似A,也就是U取前r个列向量,V取前r个列向量,Σ取前r个对角元素,即 Amn ≈ Umr*Σrr*Vrn^t  (<strong>对应上图看更明确</strong>)<br>当r&lt;&lt;m或者n时,会极大地压缩A,但是r越小信息丢失得越多<h4 id="图像降噪"><a href="#图像降噪" class="headerlink" title="图像降噪"></a>图像降噪</h4></li>
<li>通常,小的奇异值对应的是噪声,所以取前r个奇异值di可以降噪</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/19/PCA%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/19/PCA%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">PCA主成分分析数学原理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-19 11:32:18" itemprop="dateCreated datePublished" datetime="2018-02-19T11:32:18+08:00">2018-02-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>复习完线性代数再来推导下PCA  </p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ul>
<li>主成分分析(principal component analysis)是一种数据分析方法,<br>出发点:从一组特征中计算出一组按<strong>重要性</strong>从大到小排列的新特征,它们是原有特征的线性组合,并且相互之间是<strong>不相关(即不线性相关)的</strong>.  <ul>
<li>重要性:通过方差衡量,方差大说明数据分布很散,含有的信息量大</li>
<li>不相关:推导时用</li>
</ul>
</li>
</ul>
<h3 id="具体推导"><a href="#具体推导" class="headerlink" title="具体推导"></a>具体推导</h3><h4 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h4><p>记x1,x2…xp是P个原始特征(<strong>也就是某个样本的维度</strong>), <strong>x=(x1,x2…xp)^t</strong>,记ξ1,ξ2…ξp是p个新特征, <strong>ξ=(ξ1,ξ2…ξp)^t</strong><br>新特征是原始特征的线性组合,ξi =Σαij*xj =αi^t*x  或者 ξ =A^t*x<br><strong>A=(α1,α2…αp).   αi=(αi1,αi2…αip)^t.</strong><br>αi是新特征ξi线性组合的系数,不妨使||α||=1,即αi^t*αi=1(由后面推导过程可知,这是结果的共有部分,所以可以设为1),<br><strong>ξi=αi^t*x的结果是一个数,所以对αi^t*x进行转置不影响结果</strong>)  </p>
<h4 id="计算第一个新特征ξ1的方差"><a href="#计算第一个新特征ξ1的方差" class="headerlink" title="计算第一个新特征ξ1的方差:"></a>计算第一个新特征ξ1的方差:</h4><p>Var(ξ1)<br>= E{[ξ1-E[ξ1]]*[ξ1^t-E[ξ1^t]]}<br>= E[ξ1*ξ1^t]-E[ξ1]E[ξ1^t]<br>= E[α1^t*x*x^t*α1]-E[α1^t*x]E[x^t*α1]<br>= α1^t*{E[x^t*x]-E[x]E[x^t]}α1<br>= α1^t*Σ*α1<br>Σ是x的协方差矩阵,接下来在αi^t*αi=1的约束条件下求Var的极值,使用拉格朗日乘子法:<br>f(α1,ν)= α1^t*Σ*α1-ν(α1^t*α1-1)<br>关于α1求偏导并使结果等于零,可得:Σ*α1 = ν*α1 (<strong>显而易见,ν是Σ的特征值,α1是Σ对应ν的特征向量</strong>)<br>代回得,Var(ξ1) = ν*α1^t*α1 = ν,说明方差的最大值就是x的协方差矩阵的特征值,取最大的特征值ν,使新特征ξ1最重要  </p>
<h4 id="计算第二个新特征ξ2的方差"><a href="#计算第二个新特征ξ2的方差" class="headerlink" title="计算第二个新特征ξ2的方差:"></a>计算第二个新特征ξ2的方差:</h4><p>Var(ξ2) = α2^t*Σ*α2<br>保持ξ1与ξ2不相关,即加入约束Cov(ξ1,ξ2)= 0<br>Cov(ξ1,ξ2)<br>= E[ξ1*ξ2^t] - E[ξ1]E[ξ2^t]<br>= α1^t*{E[x^t*x]-E[x]E[x^t]}*α2^t<br>= α1^t*Σ*α2<br>为利用第一个新特征的条件,求Cov(ξ2,ξ1)<br>Cov(ξ2,ξ1) = Cov(ξ1,ξ2)<br>= α2^t*Σ*α1<br>= ν*α2^t*α1    (因为Σ*α1 = ν*α1)<br>= 0<br>得 α2^t*α1 = 0,说明α1与α2正交,也就是说,此处不相关等价于α1与α2正交<br>在α2^t*α2=1和α2^t*α1 =0的约束下用拉格朗日乘子法求Var(ξ2)的最大值<br>f(α2,α1,m,n) = α2^t*Σ*α2 - m(α2^t*α2-1) - n*α2^t*α1<br>分别对α2,α1,m,n求偏导并使结果为0,得n=0, Σ*α2 = m*α2 (<strong>显而易见,m是Σ的特征值,α2是Σ对应m的特征向量</strong>)<br>代回得,Var(ξ2) = m</p>
<h4 id="计算其余新特征ξ的方差"><a href="#计算其余新特征ξ的方差" class="headerlink" title="计算其余新特征ξ的方差"></a>计算其余新特征ξ的方差</h4><p>同理,求出ξ3,ξ4…ξp</p>
<h3 id="进一步总结"><a href="#进一步总结" class="headerlink" title="进一步总结"></a>进一步总结</h3><ul>
<li>可以发现,每个新特征ξi的方差都是x协方差矩阵Σ的特征值,所以有了这个理论基础后可以直接求Σ的特征值,并从大到小排序,依次作为ξi的方差</li>
<li><strong>Σ是实对称矩阵</strong>,所以Σ一定正交相似于对角矩阵,且对角矩阵的对角元素就是Σ的特征值,只需找出正交矩阵O,使O^(-1)ΣO=diag(λ1,λ2…λp)即可</li>
<li><strong>Σ是实对称矩阵</strong>,所以Σ对应不同特征值的特征向量都是正交的,求出特征向量再对特征向量进行单位化,各个特征向量即可组成一个符合条件的正交矩阵  </li>
<li>不仅如此,我们发现,计算过程中各个<strong>组合系数αi是正交的,且长度为1</strong>,所以直接用通过Σ得到的正交矩阵的各个列向量作为αi即可!所以组合系数来的很方便,但要注意对照特征值进行排序</li>
<li>这样一来,新旧特征之间的具体关系ξ=A^t*x就明确了,<strong>直接从原特征x协方差矩阵的特征值特征向量下手,就能得到新特征!</strong>实际中通常把主成分进行零均值化,即 ξ = A^t*(x-μ),这样协方差矩阵更容易计算,且不影响主成分的方向</li>
<li>每个ξi都是一个主成分,全部主成分的方差之和等于x协方差矩阵特征值的和,即 ΣVar(ξi) = Σλi,也就是x协方差矩阵的迹(trace)</li>
</ul>
<h3 id="如何降维"><a href="#如何降维" class="headerlink" title="如何降维?"></a>如何降维?</h3><ul>
<li>通常希望用较少的主成分ξi来表示数据,前k个主成分的方差和Σλi比上所有主成分的方差和可以得到这k个主成分所占的比例,根据实际需求,比如80%,算出k的个数  </li>
<li>降维:<ul>
<li>把p维的数据减少成k维的数据(k&lt;p),也就是用ξ的前k个维度(ξ1,ξ2…ξk)^t 描述每个样本  </li>
<li>换句话说,原来的坐标轴是(x1,x2…xp)^t,降维后的坐标轴是(ξ1,ξ2…ξk)^t.</li>
<li>给个具体的例子,p*m维矩阵C,由m个样本构成,每个样本是p维,使用A的前k个主成分进行降维,A^t*C,即可得到降维后的数据</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/18/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E6%B8%A9%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/18/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E6%B8%A9%E4%B9%A0/" class="post-title-link" itemprop="url">线性代数温习</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-18 15:55:43" itemprop="dateCreated datePublished" datetime="2018-02-18T15:55:43+08:00">2018-02-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>大一学的线性代数,遗忘的很严重,现在复习一下,从线性方程组说起</p>
<h3 id="一-线性方程组"><a href="#一-线性方程组" class="headerlink" title="一.线性方程组"></a>一.线性方程组</h3><ol>
<li>齐次线性方程组;非齐次线性方程组</li>
<li>要对A和x的矩阵形式熟悉, <strong>看到Ax=0能在脑中快速过一遍计算流程</strong><br><img src="http://upload-images.jianshu.io/upload_images/9608551-c6f834a53592fae4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="1.png">  </li>
<li>对于齐次线性方程组,设解空间为S:<ul>
<li>S对向量的加法和数乘两种运算是封闭的</li>
<li>任意一个解都可表示为其解空间向量的线性组合</li>
<li>n阶系数矩阵的秩为r,S的维数(基的个数)为n-r</li>
</ul>
</li>
<li>关于齐次线性方程组的解<ul>
<li>设A是m*n矩阵,则<ul>
<li>Ax=0只有零解&lt;==&gt;r(A) = n,此时,Ax=0没有基础解系(n-r = 0)</li>
<li>Ax=0有非零解&lt;==&gt;r(A) &lt; n,此时,Ax=0有无穷多个基础解系(n-r &gt; 0)</li>
<li>当m&lt; n时,这样理解:m是方程的个数,n是未知数的个数,m&lt; n说明方程个数少余未知数个数,所以方程组有非零解.  </li>
</ul>
</li>
<li>当A时n阶方阵时,Ax=0只有零解&lt;==&gt;|A|≠0,(说明r = n)</li>
<li>当A时n阶方阵时,Ax=0有非零解&lt;==&gt;|A|=0,(说明r &lt; n)<br><img src="http://upload-images.jianshu.io/upload_images/9608551-4cfa623f2150de12.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="2.png"></li>
</ul>
</li>
</ol>
<h3 id="二-特征值与特征向量"><a href="#二-特征值与特征向量" class="headerlink" title="二.特征值与特征向量"></a>二.特征值与特征向量</h3><ol>
<li>x=Ay,原坐标为x,新坐标为y,新基为正交矩阵A的列向量</li>
<li>Aα=λα, λ是特征值, α是A的对应λ的特征向量<ul>
<li>|λE-A|是关于λ的多项式,叫特征多项式</li>
<li>|λE-A|=0是特征方程</li>
<li><strong>λ1*λ2…*λn = |A|</strong></li>
<li>λ1+λ2…+λn = a11+a22…+ann,这是A的迹,tr(A)</li>
</ul>
</li>
<li>A与A^t有相同的特征多项式,因而有相同的特征值,但未必有相同的特征向量</li>
<li>方阵的相似化简<ul>
<li>A~B即 A=P^(-1)AP,相似关系是等价关系,满足:自反性,对称性,传递性</li>
<li>相似矩阵有相同的特征多项式,因而有相同的特征值</li>
<li>n阶方阵A可对角化的充要条件:<ul>
<li>A有n个线性无关的特征向量</li>
<li>A的特征值互不相同(A的特征向量线性无关)</li>
<li>A的任意特征值λi的重数是k,且对应λi有k个线性无关的特征向量</li>
<li>对于上/下三角矩阵来说,对角元素就是矩阵的特征值</li>
</ul>
</li>
<li><strong>对角方阵Λ=diag(λ1,λ2…λn), Λ=P^(-1)AP, P的列向量就是A的特征向量,Λ的元素就是A的特征值</strong></li>
</ul>
</li>
</ol>
<h3 id="三-二次型"><a href="#三-二次型" class="headerlink" title="三.二次型"></a>三.二次型</h3><ol>
<li>向量的内积定义:<ul>
<li>两个一维列向量 α=(a1,a2…an)^t, β=(b1,b2…bn)^t,  </li>
<li><strong>(α,β) =α^t*β =∑aibi</strong></li>
<li>内积运算满足对称性,线性性,正定型</li>
</ul>
</li>
<li>Cauchy-Schwarz不等式: (α,β)²≤(α,α)*(β,β)</li>
<li>向量长度||a||满足非负性,齐次性,三角不等式  </li>
<li>正交矩阵与正交变换<ul>
<li>满足A^T*A=E的实方阵A叫做正交矩阵<ul>
<li>|A|=1或者|A|=-1</li>
<li>A^t=A^(-1)</li>
<li>A^t也是正交矩阵</li>
<li>A,B都是n阶正交矩阵,则AB也是正交矩阵</li>
<li><strong>A是n阶正交矩阵&lt;==&gt;A的列向量组是一组标准正交基(每个列向量长都为1)</strong> </li>
</ul>
</li>
<li>A为正交矩阵矩阵,则线性变换y=Ax成为正交变换<ul>
<li><strong>(y,y)=(Ax,Ax)=(Ax)^t*(Ax)=x^t*A^t*A*x=x^t*x=(x,x)</strong></li>
<li><strong>(Aα,Aβ)=(Aα)^t*(Aα)^t*(Aβ)=α^t*A^t*A*β=α^t*β=(α,β)</strong>,说明对α和β做正交变换后,两向量之间的夹角不变</li>
</ul>
</li>
</ul>
</li>
<li>实对称矩阵的性质,设A为实对称矩阵<ul>
<li>A的特征值都是实数</li>
<li><strong>A的对应不同特征值的特征向量都是正交的(内积为0)</strong></li>
<li>存在n阶正交矩阵O,使得O^(-1)*A*O=O^t*A*O=diag(λ1,λ2…λn),λ1,λ2…λn是A的n个特征值,O的列向量A的特征向量,<strong>即实对称矩阵A一定正交相似与对角矩阵</strong></li>
</ul>
</li>
<li>实二次型<br><img src="http://upload-images.jianshu.io/upload_images/9608551-17795005c69dc0cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="3.png"><br><img src="http://upload-images.jianshu.io/upload_images/9608551-39f11befb3df37e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="4.png"><ul>
<li>只含平方项的二次型为二次型的标准型</li>
<li>合同矩阵  <ul>
<li>n阶矩阵A和B,存在n阶可逆矩阵P,使得B=P^t<em>A</em>P,则称A与B合同(正交变换也是用转置矩阵,但限制更严格,还要求O是正交矩阵,合同只要求P可逆)</li>
<li>合同是等价关系</li>
</ul>
</li>
<li>将二次型化为标准型<ul>
<li>用正交变换(<strong>时刻牢记系数矩阵A是实对称矩阵</strong>)<ul>
<li><strong>对于任意一个n元实二次型f=x^t*A*x,一定存在正交变换x=Oy,使得f(x1,x2…xn)=x^t*A*x=y^t*Λ*y=λ₁y₁²+λ₂y₂²…+λnyn²,其中,λ₁,λ₂,λ₃…是A的特征值,O的列向量是A的单位特征向量(可以通过求A的单位特征向量得到正交矩阵O)</strong></li>
</ul>
</li>
<li>配方法<ul>
<li>标准型中的系数不一定是A的特征值</li>
</ul>
</li>
</ul>
</li>
<li>实二次型的规范形<ul>
<li>系数只有1,-1,0,唯一(惯性定理),非零系数的个数为r(A)</li>
<li>对称矩阵A与B合同的充要条件:有相同的秩和相同的正惯性系数</li>
</ul>
</li>
</ul>
</li>
<li>正定二次型与正定矩阵<ul>
<li>正定矩阵:实二次型f(x1,x2…xn)=x^t*A*x,如果对任意x≠0,都有x^t*A*x&gt;0,则称f为正定二次型,称A为正定矩阵</li>
<li>实二次型f(x1,x2…xn)=x^t*A*x是正定二次型的充要条件是:f的标准型中n个系数全为正数(即f的正惯性系数为n)</li>
<li><strong>n阶实对称矩阵A正定的充要条件是A的n个特征值全为正数</strong></li>
<li>n阶实对称矩阵A正定的充要条件是A的合同规范形为n阶单位矩阵</li>
<li>n阶实对称矩阵A正定的充要条件是:A的n个顺序主子式都为正数(霍尔维兹定理)</li>
</ul>
</li>
<li>其它有定二次型<ul>
<li>半正定二次型:对于任意x≠0,都有f(x1,x2…xn)=x^t*A*x≥0.A为半正定矩阵</li>
<li>负定二次型:对于任意x不等于0,都有f(x1,x2…xn)=x^t*A*x&lt;0.A为负定矩阵</li>
<li>半负定二次型:对于任意x不等于0,都有f(x1,x2…xn)=x^t*A*x≤0.A为半负定矩阵</li>
<li>不属于以上类型的为不定二次型,对应不定矩阵</li>
<li>关于半正定:<ul>
<li>实二次型f(x1,x2…xn)=x^t<em>A</em>x是半正定二次型的充要条件是:f的标准型中n个系数全为非负数</li>
<li>实对称矩阵A半正定的充要条件是A的所有主子式非负</li>
</ul>
</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/17/Unbiased-Estimation-%E6%97%A0%E5%81%8F%E4%BC%B0%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/17/Unbiased-Estimation-%E6%97%A0%E5%81%8F%E4%BC%B0%E8%AE%A1/" class="post-title-link" itemprop="url">Unbiased Estimation 无偏估计</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-17 07:50:17" itemprop="dateCreated datePublished" datetime="2018-02-17T07:50:17+08:00">2018-02-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="何谓无偏估计"><a href="#何谓无偏估计" class="headerlink" title="何谓无偏估计"></a>何谓无偏估计</h2><p>就是用某个公式对采样后的样本进行统计,比如求样本的方差,这个方差会随着样本的不同而有浮动,或者说<strong>通过样本得到的方差是个随机变量</strong>,多次采样后可以对样本的方差求期望,如果方差的期望中没有变量则说明计算样本方差的公式是合理的,换句话说：用这种公式进行估计没有系统上的偏差，产生误差是随机因素造成的（跟你每次采样的运气有关）</p>
<h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>下面的证明过程以离散型随机变量为例，用连续型也OK，没有影响<br><img src="https://upload-images.jianshu.io/upload_images/9608551-aa0fd10291c790b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.png"></p>
<h2 id="样本均值"><a href="#样本均值" class="headerlink" title="样本均值"></a>样本均值</h2><h3 id="样本均值计算公式"><a href="#样本均值计算公式" class="headerlink" title="样本均值计算公式"></a>样本均值计算公式</h3><p><img src="https://upload-images.jianshu.io/upload_images/9608551-4dcdabac83049ba3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2.png"><br>这样估计样本均值是合理的吗?通过计算样本均值的期望进行检验</p>
<h3 id="样本均值无偏检验"><a href="#样本均值无偏检验" class="headerlink" title="样本均值无偏检验"></a>样本均值无偏检验</h3><p><img src="https://upload-images.jianshu.io/upload_images/9608551-94a32a28a08df23e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3.png"><br><strong>因为x_j是随机的，所以导致样本均值是个随机变量</strong><br>采用这个公式计算样本均值,样本均值的期望就是真实期望μ,所以无偏!</p>
<h2 id="样本方差"><a href="#样本方差" class="headerlink" title="样本方差"></a>样本方差</h2><h3 id="样本方差计算公式"><a href="#样本方差计算公式" class="headerlink" title="样本方差计算公式"></a>样本方差计算公式</h3><p><img src="https://upload-images.jianshu.io/upload_images/9608551-f196a7446bd9d6bc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="4.png"></p>
<h3 id="样本方差无偏检验"><a href="#样本方差无偏检验" class="headerlink" title="样本方差无偏检验"></a>样本方差无偏检验</h3><p><img src="https://upload-images.jianshu.io/upload_images/9608551-f99517ed6ec85f3a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5.png"><br>由此可以看出,通过上面的公式S² = 1/n(Σ(Xi-X拔)²)计算方差, 样本方差的期望和样本数量n有关,这样就是有偏估计了,需要调整公式,调整为：<br><img src="https://upload-images.jianshu.io/upload_images/9608551-67f45a5a306c9f75.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="6.png"><br>此时，样本方差的期望为：<br><img src="https://upload-images.jianshu.io/upload_images/9608551-06ba1dbd7690ceb9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="7.png"><br>采用公式S² = 1/n(Σ(Xi-X拔)²)计算样本方差,样本方差的期望就是真实方差σ² ,所以无偏!</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li><strong>样本x_j是随机的，进而导致样本均值和样本方差是随机变量，所以要对样本均值和样本方差求期望进行无偏检验</strong> </li>
<li>样本均值计算公式: X拔 = 1/n(ΣXi)   </li>
<li>样本方差计算公式: S² = 1/(n-1)(Σ(Xi-X拔)²) </li>
<li>真实均值：E[X] = μ ；真实方差Var[X]=E[(X-μ)²] = σ²</li>
<li><strong>样本均值的期望是μ，所以E[(X拔-μ)²] = Var(X拔)</strong>  </li>
<li>貌似在最大似然估计中,样本方差可以按照有偏的方法计算,因为<strong>样本非常多时,(n-1)σ²/n ≈ σ²</strong></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/15/Git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/15/Git%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Git使用总结</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-15 16:51:15" itemprop="dateCreated datePublished" datetime="2018-02-15T16:51:15+08:00">2018-02-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="记录一下自己的Git使用总结"><a href="#记录一下自己的Git使用总结" class="headerlink" title="记录一下自己的Git使用总结"></a>记录一下自己的Git使用总结</h3><ol>
<li><p>查看分支</p>
<ul>
<li>git branch:查看本地分支</li>
<li>git branch -r:查看远程分支</li>
<li>git branch –all:查看本地和远程分支</li>
</ul>
</li>
<li><p>删除远程分支</p>
<ul>
<li><strong>待删除的远程分支不能是默认分支!!</strong> (一开始没注意到)</li>
<li>git branch -r -d origin/branch_name</li>
<li>git push origin :branch-name(注意冒号前面的空格)</li>
</ul>
</li>
<li><p>删除本地分支</p>
<ul>
<li>git branch -d  branch_name</li>
</ul>
</li>
<li><p>clone下来的库,本地master会自动和远程库的默认分支关联 </p>
</li>
<li><p>使用git branch -r -d origin/branch_name删除远程分支后再add远程分支出现错误:fatal: remote origin already exists.<strong>解决方案</strong>:</p>
<ul>
<li>先删除远程 Git 仓库 git remote rm origin</li>
<li>再添加远程 Git 仓库 git remote add blablabla</li>
</ul>
</li>
</ol>
<p>$ git remote add origin <a href="mailto:git@github.com">git@github.com</a>:FBing/java-code-generator</p>
<h3 id="git-与-hexo"><a href="#git-与-hexo" class="headerlink" title="git 与 hexo"></a>git 与 hexo</h3><ol>
<li>在hexo的配置文件中,远程地址采用ssh协议而不是http协议,会更快<br>deploy:<br>type: git<br>repo: git@blablabla~<br>branch: master</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/12/Hexo%E4%B8%AD%E4%BD%BF%E7%94%A8Markdown%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/12/Hexo%E4%B8%AD%E4%BD%BF%E7%94%A8Markdown%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/" class="post-title-link" itemprop="url">Hexo中使用Markdown注意事项</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-12 18:09:51" itemprop="dateCreated datePublished" datetime="2018-02-12T18:09:51+08:00">2018-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><pre><code>在Hexo中,markdown对语法非常敏感,一个空格都会造成文章的布局混乱,故开一篇文章专门记录自己使用过程中的心得</code></pre><ol>
<li>起初使用notepad++编辑文章,后来发现预览效果和真实显示效果不一样,所以换成了Visual Studio Code(vscode),非常容易扩展! <strong>F1→扩展:安装扩展→输入markdown</strong> 而且能够在不关闭vscode的情况下加载插件,虽然预览效果还是和真是效果不同,不过vscode的体验很棒,就用它了!  </li>
<li>代码块由两个```构成,注意第一个 ```后面要写上编程语言,保险起见,代码块的收尾两行都不要加空格</li>
<li>编辑时注意缩进,否则可能造成序号显示不正确 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 查看分支</span><br><span class="line">    + git branch:查看本地分支</span><br><span class="line">2. 删除远程分支</span><br><span class="line">    + **待删除的远程分支不能使默认分支!!** (一开始没住到)</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/11/Python2-7%E7%BC%96%E8%A7%A3%E7%A0%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/11/Python2-7%E7%BC%96%E8%A7%A3%E7%A0%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Python2.7编解码问题总结</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-11 23:45:18" itemprop="dateCreated datePublished" datetime="2018-02-11T23:45:18+08:00">2018-02-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近颇受编码问题困扰,所以稍作总结,附以代码说明  </p>
<ol>
<li>为什么需要编解码?  </li>
</ol>
<p><strong>字符串以unicode的形式存在于内存中 ,但是unicode只是规定如何编码，并没有规定如何保存、传输这个编码,也就是说unicode不能直接写入文件或者在网络上传输</strong>,所以得通过某种编码使unicode变成连续的字节(bytes),同样地,对读入的数据解码,以unicode形式存在于内存中.<br>举例来说,在写python时,python语言处理的字符串就是内存中的unicode,写入到文件时得把unicode用utf-8,GBK等方式编码成连续的字节;用python从文件读入数据时,得用utf-8,GBK等方式把连续的字节解码成unicode.使用的解码方式务必要和编码方式一致<br><img src="http://upload-images.jianshu.io/upload_images/9608551-9557b56458a5dfa2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w700" alt="">  </p>
<ol start="2">
<li><p>python默认的编解码方式<br>可以通过下面两行代码 <strong>(示例1)</strong> 获得,一般默认是ascii,本示例中就是对unicode用ascii编码为字符串,ascii不能表示汉字,所以输入汉字时就会报错 <strong>(示例2)</strong></p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">print</span> sys.getdefaultencoding()  </span><br><span class="line"><span class="comment">#ascii</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"搁浅"</span></span><br><span class="line"><span class="comment">#SyntaxError: Non-ASCII character</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如何print汉字?<br> <strong>情况一:</strong> 在python中直接输入中文 <strong>(示例3)</strong><br> 得让python文件支持中文,将python文件的编码格式改为utf-8,就是我们通常看到的 # -*- coding:utf-8 -*-  </p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例3</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"搁浅"</span></span><br></pre></td></tr></table></figure>

<p> <strong>情况二:</strong>  print指定编码的中文 <strong>(示例4)</strong><br> 示例4报错,因为在对”搁浅”encode之前,先需要把”搁浅”解码成unicode,之后再用utf-8编码,那么问题来了,怎么解码”搁浅” ? 获取python的默认编解码方式 <strong>(示例5)</strong>,一般是ascii,所以会报错,将默认编解码方式设置成utf-8后就可以了 <strong>(示例6)</strong>  </p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例4</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line">a = <span class="string">"搁浅"</span>.encode(<span class="string">"utf-8"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例5</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">print</span> sys.getdefaultencoding()	</span><br><span class="line">	</span><br><span class="line"><span class="comment">#示例6</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">"utf-8"</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"搁浅"</span>.encode(<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>python以十六进制显示非打印字符,”搁浅”这两个字的16进制编码分别是:<strong>69081,6B585</strong><br>在python内部为:\xe<strong>6</strong>\x<strong>90</strong>\x<strong>81</strong>\xe<strong>6</strong>\x<strong>b5</strong>\x<strong>85 (示例7)</strong>,其中,\x表示十六进制 ,e表示某个字符编码的开始  </p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例7</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment">#打印s在python内部的存在形式</span></span><br><span class="line">s = [<span class="string">"搁浅"</span>]</span><br><span class="line"><span class="keyword">print</span> s</span><br></pre></td></tr></table></figure>
</li>
<li><p>乱码<br>print出乱码极可能是因为编码与解码方式不统一 <strong>(示例8)</strong>.utf-8编码,每个汉字用utf-8编码需要3个字节,用gbk编码需要2个字节. <strong>用utf-8编码后解码,再用gbk编码,造成这样的问题:本该用3个字节表示的字符,强行用2个字节表示(示例9)</strong>  </p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例8</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line">s = [<span class="string">"搁浅"</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"搁浅"</span>.decode(<span class="string">"utf-8"</span>).encode(<span class="string">"gbk"</span>)</span><br><span class="line"><span class="comment">#打印乱码:��ǳ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例9</span></span><br><span class="line">s = [<span class="string">"搁浅"</span>]</span><br><span class="line"><span class="keyword">print</span> s</span><br><span class="line"><span class="comment">#输出:["\xe6\x90\x81\xe6\xb5\x85"]	每个汉字3个字节</span></span><br><span class="line">s = [<span class="string">"搁浅"</span>.decode(<span class="string">"utf-8"</span>).encode(<span class="string">"gbk"</span>)]</span><br><span class="line"><span class="keyword">print</span> s</span><br><span class="line"><span class="comment">#输出:["\xb8\xe9\xc7\xb3"]	每个汉字2个字节</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>有待确认<br>python默认解码方式是ascii;<br>python源代码加上# -*- coding:utf-8 -*-后,不仅仅是源代码支持中文,而且print的默认编码方式也变成utf-8  </p>
</li>
</ol>
<p>推荐一个<a href="http://www.mytju.com/classcode/tools/encode_utf8.asp" target="_blank" rel="noopener">查看字符编码的网页</a>,很好用,可以查看编码10进制, <strong>编码16进制</strong>,Unicode编码10进制,Unicode编码16进制,python用的是 <strong>编码16进制</strong></p>
<p>编码问题时不时出来阻挠一下,需要继续补充总结</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/11/OralEnglishPractice/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/11/OralEnglishPractice/" class="post-title-link" itemprop="url">OralEnglishPractice</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-11 11:38:11" itemprop="dateCreated datePublished" datetime="2018-02-11T11:38:11+08:00">2018-02-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>现跟随知乎”怎么练好英语口语？”的高票回答练习口语,定期更新进展<br>问题链接:<a href="https://www.zhihu.com/question/20097263" target="_blank" rel="noopener">https://www.zhihu.com/question/20097263</a><br><a href="https://github.com/smallhaes/OralEnglish" target="_blank" rel="noopener">笔记(随时更新)</a></p>
<h3 id="进展"><a href="#进展" class="headerlink" title="进展"></a>进展</h3><h4 id="stage1"><a href="#stage1" class="headerlink" title="stage1"></a>stage1</h4><p>to 01/02/2018</p>
<ol>
<li>背诵完赵曙明，曹罗红两位老师编著的《新托福口语词汇》 的口语高频必背词汇：list1-list10</li>
<li>按照艾宾浩斯遗忘曲线进行复习</li>
<li>《新托福口语词汇》pdf链接：<a href="https://pan.baidu.com/s/1kWTuSbt" target="_blank" rel="noopener">https://pan.baidu.com/s/1kWTuSbt</a> 密码：difi<br> 口语词汇录音：链接：<a href="https://pan.baidu.com/s/1ggMH1dx" target="_blank" rel="noopener">https://pan.baidu.com/s/1ggMH1dx</a> 密码：wwow<br> 自动生成艾宾浩斯遗忘曲线计划：链接：<a href="https://pan.baidu.com/s/1kXcOtBx" target="_blank" rel="noopener">https://pan.baidu.com/s/1kXcOtBx</a> 密码：vjm6  </li>
</ol>
<h3 id="stage2"><a href="#stage2" class="headerlink" title="stage2"></a>stage2</h3><p>from 02/07/2018 to now</p>
<ol>
<li>对每个单词造句，使用的有道例句</li>
<li>按照艾宾浩斯遗忘曲线进行复习</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/09/matplotlib%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87%EF%BC%88%E8%A7%A3%E5%86%B3userwarningfamily%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/09/matplotlib%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87%EF%BC%88%E8%A7%A3%E5%86%B3userwarningfamily%EF%BC%89/" class="post-title-link" itemprop="url">Matplotlib显示中文（解决userwarningfamily）</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-09 22:00:47" itemprop="dateCreated datePublished" datetime="2018-02-09T22:00:47+08:00">2018-02-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>安装了Anaconda3，学着用matplotlib，发现不能显示中文，查阅了网上的方法，对matplotlibrc中的font.family各种改，但Jupyter Noterbook依旧显示UserWarning: findfont: Font family.<br>最终找到解决方法，操作很简单<br>在<strong>.matplotlib(图一)</strong> 这个目录里，注意文件夹名字最前面是个点，有个叫<strong>fontList.json（图二）</strong>的文件，这个目录与我的Anaconda3在同一个目录中，<br>打开后在<strong>ttffiles（图三)</strong>对应的列表中显示的就是matplotlib可以加载的字体，涵盖的字体路径有Anaconda自带的，也有系统自带的，我选择了系统自带的<strong>黑体（图四）</strong>，最后打开Anaconda3\Lib\site-packages\matplotlib\mpl-data的matplotlibrc，把font.family改成<strong>simhei（图五）</strong>（注意去掉前面的#号），重新启动Jupyter Noterbook即可显示中文</p>
<p><img src="http://upload-images.jianshu.io/upload_images/9608551-a4e1b6ff1a4d1db5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图一 .matplotlib"></p>
  <center>图一</center>



<p><img src="http://upload-images.jianshu.io/upload_images/9608551-f1e7f827cf3ad189.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图二 fontList.json"></p>
<center>图二</center>

<p><img src="http://upload-images.jianshu.io/upload_images/9608551-e67f79b9e35b45e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图三 ttffiles"></p>
<center>图三</center>

<p><img src="http://upload-images.jianshu.io/upload_images/9608551-1009513d4b49ce3b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图四 黑体"></p>
<center>图四</center>

<p><img src="http://upload-images.jianshu.io/upload_images/9608551-f476287b216a4841.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图五 matplotlibrc"></p>
<center>图五</center>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/03/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E5%A4%A7%E5%AD%A6%E7%AE%97%E6%B3%95Week3-CollinearPoints%E5%85%B1%E7%BA%BF%E6%A8%A1%E5%BC%8F%E8%AF%86%E5%88%AB-99%E5%88%86-%E6%80%BB%E7%BB%93%E5%8F%8A%E4%BB%A3%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/03/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E5%A4%A7%E5%AD%A6%E7%AE%97%E6%B3%95Week3-CollinearPoints%E5%85%B1%E7%BA%BF%E6%A8%A1%E5%BC%8F%E8%AF%86%E5%88%AB-99%E5%88%86-%E6%80%BB%E7%BB%93%E5%8F%8A%E4%BB%A3%E7%A0%81/" class="post-title-link" itemprop="url">普林斯顿大学算法Week3:CollinearPoints共线模式识别(99分)--总结及代码</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-03 20:47:33" itemprop="dateCreated datePublished" datetime="2018-02-03T20:47:33+08:00">2018-02-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>(代码有详细注释)</p>
<ol>
<li>本课讲了归并排序,作业应用是排序进行共线的模式识别,java1.8中的排序用的是tim排序,结合了归并排序与插入排序,属于<strong>稳定排序:排序之后相同元素的相对位置会不会改变</strong></li>
<li>Point.java中有个非常重要的方法,<strong>compareTo()</strong>,它定义:纵坐标越小则点越小,如果纵坐标相同,那么横坐标越小则点越小.(如果作业中要求横坐标也是按顺序排列,那么排序后的点集映射到二维坐标系中是非递减的折线, 这样找共线只用一层循环即可,可惜作业没加上对x的限制)</li>
<li>比较大小,一开始我用的是points[i-1] == point[i],尽管坐标相同但是points[i-1]不等于points[i]<br>因为points[i-1]和points[i]表示引用,在堆中指向两个不同的地址,比较大小得用points[i-1].compareTo(points[i])</li>
<li>在FastCollinearPoints.java中,一定要注意什么时候对共线点数变量count进行判断,有两种情况,一个是,相邻元素与参考点的斜率不同;另一个是循环到最后一个元素.这两种情况在代码注释中有解释</li>
<li>唯一一处FAILED,扣了1分,没系统学过java,先跳过了  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Test 7: check for dependence on either compareTo() or compare()</span><br><span class="line">        returning &#123; -1, +1, 0 &#125; instead of &#123; negative integer,</span><br><span class="line">        positive integer, zero &#125;</span><br><span class="line">  * filename &#x3D; equidistant.txt</span><br><span class="line">    - number of entries in student   solution: 0</span><br><span class="line">    - number of entries in reference solution: 4</span><br><span class="line">    - 4 missing entries in student solution, including: &#39;(30000, 0) -&gt; (20000, 10000) -&gt; (10000, 20000) -&gt; (0, 30000)&#39;</span><br><span class="line">&#x3D;&#x3D;&gt; FAILED</span><br></pre></td></tr></table></figure></li>
<li>week3课件中,递归调用的图示:<br>这是包含两个递归调用的递归 (图示只画了一半)<br><img src="http://upload-images.jianshu.io/upload_images/9608551-c31de2c890e27f18.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Merge.jpg"></li>
</ol>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>(如需提交,请删除中文注释)</p>
<h3 id="一-Point-java"><a href="#一-Point-java" class="headerlink" title="一:Point.java"></a>一:Point.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdDraw;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Point</span>&gt; </span>&#123;</span><br><span class="line">	<span class="comment">// x-coordinate of this point</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> x;</span><br><span class="line">	<span class="comment">// y-coordinate of this point</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> y;</span><br><span class="line">	<span class="comment">// constructs the point (x, y)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="comment">// draws this point</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>   <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		StdDraw.point(x,y);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// draws the line segment from this point to that point</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>   <span class="keyword">void</span> <span class="title">drawTo</span><span class="params">(Point that)</span> </span>&#123;</span><br><span class="line">		StdDraw.line(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y, that.x, that.y);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// string representation</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"("</span> + x + <span class="string">", "</span> + y + <span class="string">")"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// compare two points by y-coordinates, breaking ties by x-coordinates	</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Point that)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(y&lt;that.y || (y==that.y &amp;&amp; x&lt;that.x)) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(y==that.y &amp;&amp; x==that.x) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">return</span> +<span class="number">1</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="comment">// the slope between this point and that point</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">double</span> <span class="title">slopeTo</span><span class="params">(Point that)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(x==that.x &amp;&amp; y==that.y) <span class="keyword">return</span> Double.NEGATIVE_INFINITY;</span><br><span class="line">		<span class="keyword">if</span>(x==that.x &amp;&amp; y!=that.y) <span class="keyword">return</span> Double.POSITIVE_INFINITY;		</span><br><span class="line">		<span class="keyword">if</span>(y==that.y) <span class="keyword">return</span> +<span class="number">0.0</span>;</span><br><span class="line">		<span class="keyword">return</span> (<span class="keyword">double</span>)(y-that.y)/(x-that.x);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// compare two points by slopes they make with this point</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Comparator&lt;Point&gt; <span class="title">slopeOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> SlopeOrder();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//nested class</span></span><br><span class="line">	<span class="comment">//sort rule</span></span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SlopeOrder</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Point</span>&gt;</span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Point p,Point q)</span> </span>&#123;</span><br><span class="line">			<span class="comment">//p点斜率大</span></span><br><span class="line">			<span class="keyword">if</span>(slopeTo(p)&lt;slopeTo(q)) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">			<span class="comment">//p点斜率小</span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(slopeTo(p)&gt;slopeTo(q)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			<span class="comment">//p,q斜率相等</span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Point p1 = <span class="keyword">new</span> Point(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">		Point p2 = <span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">		Point p3 = <span class="keyword">new</span> Point(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">		Point p4 = <span class="keyword">new</span> Point(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">		Point p5 = <span class="keyword">new</span> Point(<span class="number">4</span>,<span class="number">1</span>);</span><br><span class="line">		System.out.println(<span class="string">"p1.compareTo(p1) is "</span>+p1.compareTo(p2));</span><br><span class="line">		System.out.println(<span class="string">"p2.compareTo(p1) is "</span>+p2.compareTo(p1));</span><br><span class="line">		System.out.println(<span class="string">"p1.compareTo(p1) is "</span>+p1.compareTo(p1)+<span class="string">"\n"</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"p1.slopeTo(p2) is "</span> +p1.slopeTo(p2));</span><br><span class="line">		System.out.println(<span class="string">"p1.slopeTo(p4) is "</span>+p1.slopeTo(p4));</span><br><span class="line">		System.out.println(<span class="string">"p1.slopeTo(p1) is "</span>+p1.slopeTo(p1));</span><br><span class="line">		System.out.println(<span class="string">"p3.slopeTo(p4) is "</span>+p3.slopeTo(p4));</span><br><span class="line">		System.out.println(<span class="string">"p2.slopeTo(p5) is "</span>+p2.slopeTo(p5));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二-BruteCollinearPoints-java"><a href="#二-BruteCollinearPoints-java" class="headerlink" title="二:BruteCollinearPoints.java"></a>二:BruteCollinearPoints.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.In;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.Insertion;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdOut;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdDraw;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BruteCollinearPoints</span> </span>&#123;</span><br><span class="line">	 <span class="comment">//to store line segments</span></span><br><span class="line">	 <span class="keyword">private</span> ArrayList&lt;LineSegment&gt; LineSegmentList;</span><br><span class="line">	 <span class="comment">//to store the given points</span></span><br><span class="line">	 <span class="keyword">private</span> Point[] points;</span><br><span class="line">	</span><br><span class="line">	 <span class="comment">//在构造函数中找出由4点构成的线段(作业说了:没有5点及更多点共线的情况)</span></span><br><span class="line">	 <span class="comment">// finds all line segments containing 4 point</span></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="title">BruteCollinearPoints</span><span class="params">(Point[] pointsIn)</span> </span>&#123; </span><br><span class="line">		 <span class="comment">//三种异常</span></span><br><span class="line">		 <span class="comment">//一:if the argument to the constructor is null</span></span><br><span class="line">		 System.out.println(<span class="string">" a "</span>);</span><br><span class="line">		 <span class="keyword">if</span>(pointsIn == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"there is no point"</span>);</span><br><span class="line">		 <span class="comment">//二:if any point in the array is null</span></span><br><span class="line">		 <span class="keyword">int</span> N = pointsIn.length;</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) <span class="keyword">if</span>(pointsIn[i]==<span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"exist null point"</span>);</span><br><span class="line">		 <span class="comment">//三:if the argument to the constructor contains a repeated point</span></span><br><span class="line">		 <span class="comment">//检查是否有重复的点,先排序,再查重会方便,作业允许这样: For example, you may use Arrays.sort()</span></span><br><span class="line">		 points = <span class="keyword">new</span> Point[N];</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) points[i] = pointsIn[i];</span><br><span class="line">		 Arrays.sort(points);</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++) <span class="keyword">if</span>(points[i-<span class="number">1</span>].compareTo(points[i])==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"exist repeated point"</span>); </span><br><span class="line">		 </span><br><span class="line">		 <span class="comment">//to save every required line segment</span></span><br><span class="line">		 LineSegmentList = <span class="keyword">new</span> ArrayList&lt;LineSegment&gt;();</span><br><span class="line">		 	 </span><br><span class="line">		 <span class="comment">//find line segment</span></span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> dot1=<span class="number">0</span>;dot1&lt;=N-<span class="number">4</span>;dot1++) &#123;</span><br><span class="line">			 <span class="keyword">for</span>(<span class="keyword">int</span> dot2=dot1+<span class="number">1</span>;dot2&lt;=N-<span class="number">3</span>;dot2++) &#123;</span><br><span class="line">				 <span class="comment">//k12:the slope between point[dot2] and point[dot1]</span></span><br><span class="line">				 <span class="keyword">double</span> k12 = points[dot2].slopeTo(points[dot1]);</span><br><span class="line">				 <span class="keyword">for</span>(<span class="keyword">int</span> dot3=dot2+<span class="number">1</span>;dot3&lt;=N-<span class="number">2</span>;dot3++) &#123;</span><br><span class="line">					 <span class="comment">//k13:the slope between point[dot3] and point[dot1]</span></span><br><span class="line">					 <span class="keyword">double</span> k13 = points[dot3].slopeTo(points[dot1]);</span><br><span class="line">					 <span class="keyword">if</span>(k13 != k12) <span class="keyword">continue</span>;</span><br><span class="line">					 <span class="keyword">for</span>(<span class="keyword">int</span> dot4=dot3+<span class="number">1</span>;dot4&lt;=N-<span class="number">1</span>;dot4++) &#123;</span><br><span class="line">						<span class="comment">//k14:the slope between point[dot4] and point[dot1]</span></span><br><span class="line">						 <span class="keyword">double</span> k14 = points[dot4].slopeTo(points[dot1]);</span><br><span class="line">						 <span class="keyword">if</span>(k14 != k12) <span class="keyword">continue</span>;</span><br><span class="line">						 <span class="comment">//find a line segment</span></span><br><span class="line">						 LineSegment linesegment = <span class="keyword">new</span> LineSegment(points[dot1],points[dot4]);</span><br><span class="line">						 LineSegmentList.add(linesegment);</span><br><span class="line">					 &#125;</span><br><span class="line">				 &#125;</span><br><span class="line">			 &#125;</span><br><span class="line">		 &#125;</span><br><span class="line">	 &#125;</span><br><span class="line">	 <span class="comment">// the number of line segments</span></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numberOfSegments</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		 <span class="keyword">return</span> LineSegmentList.size();</span><br><span class="line">	 &#125;</span><br><span class="line">	 <span class="comment">// the line segments</span></span><br><span class="line">	 <span class="keyword">public</span> LineSegment[] segments() &#123;</span><br><span class="line">		 LineSegment[] segments = <span class="keyword">new</span> LineSegment[LineSegmentList.size()];</span><br><span class="line">		 <span class="keyword">int</span> index=<span class="number">0</span>;</span><br><span class="line">		 <span class="keyword">for</span>(LineSegment Line : LineSegmentList) &#123;</span><br><span class="line">			 segments[index++] = Line;</span><br><span class="line">		 &#125;</span><br><span class="line">		 <span class="keyword">return</span> segments;</span><br><span class="line">	 &#125;    </span><br><span class="line">	 <span class="comment">//main</span></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	        In in = <span class="keyword">new</span> In(<span class="string">"src/week3/input8.txt"</span>); </span><br><span class="line">	        <span class="keyword">int</span> n = in.readInt();</span><br><span class="line">	        StdOut.println(<span class="string">"total "</span>+n+<span class="string">" points"</span>);</span><br><span class="line">	        Point[] points = <span class="keyword">new</span> Point[n];</span><br><span class="line">	        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">	        	<span class="keyword">int</span> x = in.readInt();</span><br><span class="line">	            <span class="keyword">int</span> y = in.readInt();</span><br><span class="line">	            StdOut.println(<span class="string">"("</span>+x+<span class="string">","</span>+y+<span class="string">")"</span>); </span><br><span class="line">	            points[i] = <span class="keyword">new</span> Point(x,y);</span><br><span class="line">	        &#125;       </span><br><span class="line">	        <span class="comment">//draw the points</span></span><br><span class="line">	        StdDraw.enableDoubleBuffering();</span><br><span class="line">	        StdDraw.setXscale(<span class="number">0</span>, <span class="number">32768</span>);</span><br><span class="line">	        StdDraw.setYscale(<span class="number">0</span>, <span class="number">32768</span>);</span><br><span class="line">	        StdDraw.setPenColor(StdDraw.RED);</span><br><span class="line">	        StdDraw.setPenRadius(<span class="number">0.01</span>);</span><br><span class="line">	        <span class="keyword">for</span> (Point p : points) &#123;</span><br><span class="line">	            p.draw();</span><br><span class="line">	        &#125;</span><br><span class="line">	        StdDraw.show();              </span><br><span class="line">	        <span class="comment">// print and draw the line segments</span></span><br><span class="line">	        BruteCollinearPoints collinear = <span class="keyword">new</span> BruteCollinearPoints(points);</span><br><span class="line">	        StdOut.println(collinear.numberOfSegments());</span><br><span class="line">	        <span class="keyword">for</span> (LineSegment segment : collinear.segments()) &#123;</span><br><span class="line">	            StdOut.println(segment);</span><br><span class="line">	            segment.draw();</span><br><span class="line">	        &#125;</span><br><span class="line">	        StdDraw.show();          </span><br><span class="line">	 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="三-FastCollinearPoints-java"><a href="#三-FastCollinearPoints-java" class="headerlink" title="三:FastCollinearPoints.java"></a>三:FastCollinearPoints.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.In;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdDraw;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdOut;</span><br><span class="line"></span><br><span class="line"><span class="comment">//much faster than the brute-force solution</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FastCollinearPoints</span> </span>&#123;</span><br><span class="line">	<span class="comment">//to store line segments</span></span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;LineSegment&gt; LineSegmentList;</span><br><span class="line">	<span class="comment">//to store the given points</span></span><br><span class="line">	<span class="keyword">private</span> Point[] points;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// finds all line segments containing 4 or more points</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">FastCollinearPoints</span><span class="params">(Point[] pointsIn)</span> </span>&#123;</span><br><span class="line">		 <span class="comment">//三种异常</span></span><br><span class="line">		 <span class="comment">//一:if the argument to the constructor is null</span></span><br><span class="line">		 <span class="keyword">if</span>(pointsIn == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"there is no point"</span>);</span><br><span class="line">		<span class="comment">//number of points</span></span><br><span class="line">		 <span class="keyword">int</span> N=pointsIn.length;</span><br><span class="line">		 <span class="comment">//二:if any point in the array is null</span></span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) <span class="keyword">if</span>(pointsIn[i]==<span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"exist null point"</span>);</span><br><span class="line">		 <span class="comment">//三:if the argument to the constructor contains a repeated point</span></span><br><span class="line">		 <span class="comment">//检查是否有重复的点,先排序,再查重会方便,作业允许这样: For example, you may use        Arrays.sort()</span></span><br><span class="line">		 <span class="comment">//同时有利于后面排除重复线段</span></span><br><span class="line">		 points = <span class="keyword">new</span> Point[N];</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) points[i] = pointsIn[i];</span><br><span class="line">		 <span class="comment">//用的是结合了归并和插入的tim排序,稳定排序</span></span><br><span class="line">		 Arrays.sort(points);</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++) <span class="keyword">if</span>(points[i-<span class="number">1</span>].compareTo(points[i])==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"exist repeated point"</span>);</span><br><span class="line">		</span><br><span class="line">		 <span class="comment">//to save every required line segment</span></span><br><span class="line">		 LineSegmentList = <span class="keyword">new</span> ArrayList&lt;LineSegment&gt;();</span><br><span class="line">		 	 </span><br><span class="line">		 </span><br><span class="line">		 <span class="comment">//当前的参考点</span></span><br><span class="line">		 Point currentCheck;</span><br><span class="line">		 <span class="comment">//对照点重新存储,不包括参考点,共N-1个</span></span><br><span class="line">		 Point[] otherPoints = <span class="keyword">new</span> Point[N-<span class="number">1</span>];</span><br><span class="line">		 <span class="comment">//开始比较斜率,一个一个来</span></span><br><span class="line">		 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) &#123;</span><br><span class="line">			 currentCheck = points[i];</span><br><span class="line">			 <span class="comment">// copy points without Point currentCheck to otherPoints</span></span><br><span class="line">			 <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;N;j++) &#123;</span><br><span class="line">				 <span class="keyword">if</span>(j&lt;i) otherPoints[j] = points[j];</span><br><span class="line">				 <span class="keyword">if</span>(j&gt;i) otherPoints[j-<span class="number">1</span>] = points[j];</span><br><span class="line">			 &#125;</span><br><span class="line">			 </span><br><span class="line">			 <span class="comment">//根据斜率对点排序</span></span><br><span class="line">			 <span class="comment">//用的是结合了归并和插入的tim排序,稳定排序</span></span><br><span class="line">			 Arrays.sort(otherPoints,currentCheck.slopeOrder());</span><br><span class="line">			 <span class="comment">//遍历已经排序的otherPoints找线段</span></span><br><span class="line">			 <span class="comment">//注意,归并和插入排序都是稳定的,所以tim排序是稳定的,这非常重要</span></span><br><span class="line">			 <span class="comment">//配合Point的compareTo方法,可以直接过滤掉重复线段</span></span><br><span class="line">			 <span class="comment">//一开始没太注意compareTo方法,后来发现这个方法能固定住点之间的相对位置,所以可以过滤重复线段</span></span><br><span class="line">			 <span class="comment">//两点共线</span></span><br><span class="line">			 <span class="keyword">int</span> count=<span class="number">2</span>;</span><br><span class="line">			 <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;N-<span class="number">1</span>;k++) &#123;</span><br><span class="line">				 <span class="keyword">double</span> k1 = otherPoints[k-<span class="number">1</span>].slopeTo(currentCheck);</span><br><span class="line">				 <span class="keyword">double</span> k2 = otherPoints[k].slopeTo(currentCheck);</span><br><span class="line">				 <span class="keyword">if</span>(k1==k2) &#123;</span><br><span class="line">					 count++;</span><br><span class="line">					 <span class="comment">//当循环到最后一个点,同时这个点和前面的点共线</span></span><br><span class="line">					 <span class="keyword">if</span>(k==N-<span class="number">2</span>) &#123;</span><br><span class="line">						 <span class="comment">//如果4点及以上共线,并且otherPoints中与参考点共线且排在最左边的点比参考点大的话,注意此处是遍历到头,所以索引是k-count+2</span></span><br><span class="line">						 <span class="keyword">if</span>(count&gt;=<span class="number">4</span> &amp;&amp; currentCheck.compareTo(otherPoints[k-count+<span class="number">2</span>])==-<span class="number">1</span>) &#123; </span><br><span class="line">							 <span class="comment">//线段起点</span></span><br><span class="line">							 Point start = currentCheck;</span><br><span class="line">							 <span class="comment">//线段终点</span></span><br><span class="line">							 Point end = otherPoints[k];</span><br><span class="line">							 LineSegment linesegment = <span class="keyword">new</span> LineSegment(start,end);</span><br><span class="line">							 LineSegmentList.add(linesegment);</span><br><span class="line">						 &#125;</span><br><span class="line">					 &#125;</span><br><span class="line">				 &#125;</span><br><span class="line">				 <span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="comment">//如果4点及以上共线,并且otherPoints中与参考点共线且排在最左边的点比参考点大的话,索引是k-count+1</span></span><br><span class="line">					 <span class="keyword">if</span>(count&gt;=<span class="number">4</span> &amp;&amp; currentCheck.compareTo(otherPoints[k-count+<span class="number">1</span>])==-<span class="number">1</span>) &#123;</span><br><span class="line">						 	 Point start = currentCheck;</span><br><span class="line">						 	 Point end = otherPoints[k-<span class="number">1</span>];</span><br><span class="line">							 LineSegment linesegment = <span class="keyword">new</span> LineSegment(start,end);</span><br><span class="line">							 LineSegmentList.add(linesegment);</span><br><span class="line">					 &#125;</span><br><span class="line">					 count=<span class="number">2</span>;</span><br><span class="line">				 &#125;</span><br><span class="line">			 &#125;</span><br><span class="line">		 &#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// the number of line segments</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">int</span> <span class="title">numberOfSegments</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> LineSegmentList.size();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// the line segments</span></span><br><span class="line">	<span class="keyword">public</span> LineSegment[] segments() &#123;</span><br><span class="line">		LineSegment[] segments = <span class="keyword">new</span> LineSegment[LineSegmentList.size()];</span><br><span class="line">		 <span class="keyword">int</span> index=<span class="number">0</span>;</span><br><span class="line">		 <span class="keyword">for</span>(LineSegment Line : LineSegmentList) &#123;</span><br><span class="line">			 segments[index++] = Line;</span><br><span class="line">		 &#125;</span><br><span class="line">		 <span class="keyword">return</span> segments;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	     <span class="comment">//main</span></span><br><span class="line">		 <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		        In in = <span class="keyword">new</span> In(<span class="string">"src/week3/input9.txt"</span>); </span><br><span class="line">		        <span class="keyword">int</span> n = in.readInt();</span><br><span class="line">		        StdOut.println(<span class="string">"total "</span>+n+<span class="string">" points"</span>);</span><br><span class="line">		        Point[] points = <span class="keyword">new</span> Point[n];</span><br><span class="line">		        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">		        	<span class="keyword">int</span> x = in.readInt();</span><br><span class="line">		            <span class="keyword">int</span> y = in.readInt();</span><br><span class="line">		            StdOut.println(<span class="string">"("</span>+x+<span class="string">","</span>+y+<span class="string">")"</span>); </span><br><span class="line">		            points[i] = <span class="keyword">new</span> Point(x,y);</span><br><span class="line">		        &#125;</span><br><span class="line">		        </span><br><span class="line">		        <span class="comment">//draw the points</span></span><br><span class="line">		        StdDraw.enableDoubleBuffering();</span><br><span class="line">		        StdDraw.setXscale(<span class="number">0</span>, <span class="number">32768</span>);</span><br><span class="line">		        StdDraw.setYscale(<span class="number">0</span>, <span class="number">32768</span>);</span><br><span class="line">		        StdDraw.setPenColor(StdDraw.RED);</span><br><span class="line">		        StdDraw.setPenRadius(<span class="number">0.01</span>);</span><br><span class="line">		        <span class="keyword">for</span> (Point p : points) &#123;</span><br><span class="line">		            p.draw();</span><br><span class="line">		        &#125;</span><br><span class="line">		        StdDraw.show();</span><br><span class="line">		              </span><br><span class="line">		        <span class="comment">//print and draw the line segments</span></span><br><span class="line">		        FastCollinearPoints collinear = <span class="keyword">new</span> FastCollinearPoints(points);</span><br><span class="line">		        StdOut.println(collinear.numberOfSegments());</span><br><span class="line">		        <span class="keyword">for</span> (LineSegment segment : collinear.segments()) &#123;</span><br><span class="line">		            StdOut.println(segment);</span><br><span class="line">		            segment.draw();</span><br><span class="line">		        &#125;</span><br><span class="line">		        StdDraw.show();          </span><br><span class="line">		 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/28/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E5%A4%A7%E5%AD%A6%E7%AE%97%E6%B3%95Week2-Deques-and-Randomized-Queues-95%E5%88%86-%E6%80%BB%E7%BB%93%E5%8F%8A%E4%BB%A3%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/28/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E5%A4%A7%E5%AD%A6%E7%AE%97%E6%B3%95Week2-Deques-and-Randomized-Queues-95%E5%88%86-%E6%80%BB%E7%BB%93%E5%8F%8A%E4%BB%A3%E7%A0%81/" class="post-title-link" itemprop="url">普林斯顿大学算法Week2:Deques and Randomized Queues(95分)--总结及代码</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-28 20:42:45" itemprop="dateCreated datePublished" datetime="2018-01-28T20:42:45+08:00">2018-01-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="一-Deque"><a href="#一-Deque" class="headerlink" title="一.Deque"></a>一.Deque</h3><p>目标:<br>A double-ended queue or deque is a generalization of a stack and a queue that supports adding and removing items from either the front or the back of the data structure. Create a generic data type Deque that implements the following API<br>要求:<br>Your deque implementation must support each deque operation (including construction) in constant worst-case time. A deque containing n items must use <strong>at most 48n + 192 bytes of memory</strong> and use space proportional to the number of items currently in the deque. Additionally, your iterator implementation must support each operation (including construction) in constant worst-case time.<br>分析:<br>deque可以分别在头尾做添加删除操作,并且在最坏的情况下消耗常数时间,所以数组不行,因为使用数组在头部添加或删除元素时<strong>必须修改后面所有元素的索引</strong>,这个操作耗费时间随数组长度的增加而增加.所以采用链表结构,在头尾维护两个指针即可实现constant time  </p>
<h3 id="二-Randomized-queue"><a href="#二-Randomized-queue" class="headerlink" title="二.Randomized queue"></a>二.Randomized queue</h3><p>目标:<br>A randomized queue is similar to a stack or queue, except that the item removed is chosen uniformly at random from items in the data structure. Create a generic data type RandomizedQueue that implements the following API<br>要求:<br>Your randomized queue implementation must support <strong>each randomized queue operation (besides creating an iterator) in constant amortized time</strong>. That is, any sequence of m randomized queue operations (starting from an empty queue) must take at most cm steps in the worst case, for some constant c. A randomized queue containing n items must use at most 48n + 192 bytes of memory. Additionally, your iterator implementation must support operations next() and hasNext() in constant worst-case time; and construction in linear time; you may (and will need to) use a linear amount of extra memory per iterator.<br>分析:<br>为实现randomized queue的(除iterator操作)操作平摊时间最差是常数需要采用数组实现,虽然数组长度的扩展或者缩短所需时间正比于数组当前存储元素的个数,但是实现其余API(除iterator操作)的操作只需常数时间,把耗费的时间平摊后就是常数时间了.<br>为什么不能采用链表结构呢?链表结构实现literator非常方便,只需创建一个指针,不断移动指针的位置就可以实现iterator的各个功能,耗费常数时间,但是题目并不要求iterator耗费常数时间,注意到public Item dequeue()这个API,要求remove and return a random item,难点在于随机返回一个元素,首先创建一个随机数作为索引,对于链表来说,需要移动相应次数的指针找到那个元素,这个操作耗费时间正比于随机数的大小,不是常数时间.  </p>
<h3 id="三-Permutation"><a href="#三-Permutation" class="headerlink" title="三. Permutation"></a>三. Permutation</h3><p>目标:<br>Write a client program Permutation.java that takes an integer k as a command-line argument; reads in a sequence of strings from standard input using StdIn.readString(); and prints exactly k of them, uniformly at random. Print each item from the sequence at most once.<br>要求:<br>The running time of Permutation must be linear in the size of the input. You may use only a constant amount of memory plus either one Deque or RandomizedQueue object of maximum size at most n. (<strong>For an extra challenge, use only one Deque or RandomizedQueue object of maximum size at most k</strong>)<br>分析:<br>没能完成extra challenge,所以扣了5分<br>这个直接看代码即可</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="一-Deque-1"><a href="#一-Deque-1" class="headerlink" title="一.Deque"></a>一.Deque</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Deque</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Node first,last; <span class="comment">//64位系统,每个引用8bytes,此处共16bytes</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> n; <span class="comment">//4bytes</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;  <span class="comment">//64位系统,对象头16bytes , 内部类开销8bytes</span></span><br><span class="line">		<span class="keyword">private</span> Item item;  <span class="comment">//64位系统,8bytes</span></span><br><span class="line">		<span class="keyword">private</span> Node next;  <span class="comment">//64位系统,8bytes</span></span><br><span class="line">		<span class="keyword">private</span> Node pre;  <span class="comment">//64位系统,8bytes     所以,1个Node占用48bytes,n个Node就是48n bytes</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// construct an empty deque</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Deque</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		first = <span class="keyword">null</span>;</span><br><span class="line">		last = <span class="keyword">null</span>;</span><br><span class="line">		n = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//is Deque empty?</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> n == <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// return the number of items on the deque</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> n;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// add the item to the front</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(item==<span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.lang.IllegalArgumentException(<span class="string">"there is nothing"</span>);</span><br><span class="line">		Node oldfirst = first;</span><br><span class="line">		first = <span class="keyword">new</span> Node();</span><br><span class="line">		first.item = item;</span><br><span class="line">		first.next = oldfirst;</span><br><span class="line">		<span class="comment">//if(isEmpty())   just use n rather to call isEmpty()</span></span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) last = first;</span><br><span class="line">		<span class="keyword">else</span> oldfirst.pre = first;</span><br><span class="line">		n++;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// add the item to the end</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(item==<span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.lang.IllegalArgumentException(<span class="string">"there is nothing"</span>);</span><br><span class="line">		Node oldlast = last;</span><br><span class="line">		last = <span class="keyword">new</span> Node();</span><br><span class="line">		last.item = item;</span><br><span class="line">		last.pre = oldlast;</span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) first = last;</span><br><span class="line">		<span class="keyword">else</span> oldlast.next = last;</span><br><span class="line">		n++;</span><br><span class="line">	&#125;</span><br><span class="line">	   </span><br><span class="line">	<span class="comment">// remove and return the item from the front</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Item <span class="title">removeFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//if 'if' runs,the program would stop</span></span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.util.NoSuchElementException(<span class="string">"Deque is empty!!"</span>);</span><br><span class="line">		Item temp = first.item;</span><br><span class="line">		first = first.next;</span><br><span class="line">		n--;</span><br><span class="line">		<span class="comment">//check if the Deque is empty after remove</span></span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) last = <span class="keyword">null</span>;<span class="comment">//first is null now </span></span><br><span class="line">		<span class="keyword">else</span> first.pre = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// remove and return the item from the end</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Item <span class="title">removeLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.util.NoSuchElementException(<span class="string">"Deque is empty!!"</span>);</span><br><span class="line">		Item temp = last.item;</span><br><span class="line">		last = last.pre;</span><br><span class="line">		n--;</span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>)first = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">else</span> last.next=<span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// return an iterator over items in order from front to end</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> ListIterator();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt;</span>&#123; <span class="comment">//对象头:16bytes </span></span><br><span class="line">		<span class="keyword">private</span> Node current = first; <span class="comment">//内部类额外开销8bytes,引用8bytes</span></span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> current != <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> java.lang.UnsupportedOperationException(<span class="string">"you mustn't do this!"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(current == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.util.NoSuchElementException(<span class="string">"no such element"</span>);</span><br><span class="line">			Item temp = current.item;</span><br><span class="line">			current = current.next;</span><br><span class="line">			<span class="keyword">return</span> temp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//main</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Deque&lt;String&gt; deque = <span class="keyword">new</span> Deque&lt;String&gt;();</span><br><span class="line">		System.out.println(deque.size());</span><br><span class="line">		deque.addFirst(<span class="string">"haha"</span>);</span><br><span class="line">		deque.addFirst(<span class="string">"hehe"</span>);</span><br><span class="line">		deque.addFirst(<span class="string">"heihei"</span>);</span><br><span class="line">		deque.addFirst(<span class="string">"hiahia"</span>);</span><br><span class="line">		deque.addFirst(<span class="string">"houhou"</span>);</span><br><span class="line">		System.out.println(deque.size());</span><br><span class="line">		deque.removeFirst();</span><br><span class="line">		System.out.println(deque.size());</span><br><span class="line">		deque.removeLast();</span><br><span class="line">		System.out.println(deque.size());</span><br><span class="line">		Iterator&lt;String&gt; i = deque.iterator();</span><br><span class="line">		<span class="keyword">while</span>(i.hasNext()) System.out.println(i.next());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二-Randomized-queue-1"><a href="#二-Randomized-queue-1" class="headerlink" title="二.Randomized queue"></a>二.Randomized queue</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdRandom;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Additionally, your iterator implementation must support operations next() and hasNext() </span></span><br><span class="line"><span class="comment">//in constant worst-case time;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomizedQueue</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Item[] randomq;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// construct an empty randomized queue</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RandomizedQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		randomq = (Item[]) <span class="keyword">new</span> Object[<span class="number">1</span>];</span><br><span class="line">		n = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// is the randomized queue empty?</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> n == <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// return the number of items on the randomized queue</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> n;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//resize the array</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//temp is a "yinyong"</span></span><br><span class="line">		Item[] temp = (Item[]) <span class="keyword">new</span> Object[size]; </span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) temp[i] = randomq[i];</span><br><span class="line">		randomq = temp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// add the item</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (item==<span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.lang.IllegalArgumentException(<span class="string">"there is nothing"</span>);</span><br><span class="line">		<span class="keyword">if</span>(n==randomq.length) resize(<span class="number">2</span>*n);</span><br><span class="line">		randomq[n++] = item;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// remove and return a random item</span></span><br><span class="line">	<span class="comment">//exchange the chosen element with the last element</span></span><br><span class="line">	<span class="comment">//then,delete the last one</span></span><br><span class="line">	<span class="comment">//so that realize deleting the random element in the end of queue</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Item <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//faster than call isEmpty()</span></span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.util.NoSuchElementException(<span class="string">"array is empty"</span>);</span><br><span class="line">		<span class="keyword">int</span> i = StdRandom.uniform(<span class="number">0</span>,n);</span><br><span class="line">		Item temp = randomq[i];</span><br><span class="line">		<span class="comment">// pay attention to the change of n</span></span><br><span class="line">		<span class="keyword">if</span>(i != --n) randomq[i] = randomq[n];</span><br><span class="line">		randomq[n] = <span class="keyword">null</span>;</span><br><span class="line">		<span class="comment">//here without n&gt;0.wrong,try:add one,delete one</span></span><br><span class="line">		<span class="keyword">if</span>(n&gt;<span class="number">0</span> &amp;&amp; n==randomq.length/<span class="number">4</span>) resize(randomq.length/<span class="number">2</span>);</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// return a random item (but do not remove it)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Item <span class="title">sample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.util.NoSuchElementException(<span class="string">"array is empty"</span>);</span><br><span class="line">		<span class="keyword">return</span> randomq[StdRandom.uniform(<span class="number">0</span>,n)];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// return an independent iterator over items in random order</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> RandomIterator();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// inner class</span></span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt;</span>&#123;</span><br><span class="line">		<span class="comment">// m is as index,just like the pointer in Deque</span></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">int</span> m;</span><br><span class="line">		<span class="keyword">private</span> Item[] iterq;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="title">RandomIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			iterq = (Item[])<span class="keyword">new</span> Object[n];</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) iterq[i] = randomq[i];</span><br><span class="line">			<span class="comment">//random order</span></span><br><span class="line">			StdRandom.shuffle(iterq);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> m &lt; n;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> java.lang.UnsupportedOperationException(<span class="string">"you mustn't do this!"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(m&gt;=n) <span class="keyword">throw</span> <span class="keyword">new</span> java.util.NoSuchElementException(<span class="string">"no next element!"</span>);</span><br><span class="line">			Item temp = iterq[m++];</span><br><span class="line">			<span class="keyword">return</span> temp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// unit testing (optional)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		RandomizedQueue&lt;String&gt; rq = <span class="keyword">new</span> RandomizedQueue&lt;String&gt;();</span><br><span class="line">		System.out.println(rq.isEmpty());</span><br><span class="line">		System.out.println(rq.size());</span><br><span class="line">		rq.enqueue(<span class="string">"haha"</span>);</span><br><span class="line">		rq.enqueue(<span class="string">"heihei"</span>);</span><br><span class="line">		rq.enqueue(<span class="string">"hiahia"</span>);</span><br><span class="line">		rq.enqueue(<span class="string">"hehe"</span>);</span><br><span class="line">		rq.enqueue(<span class="string">"houhou"</span>);</span><br><span class="line">		System.out.println(rq.size());</span><br><span class="line">		rq.dequeue();</span><br><span class="line">		rq.dequeue();</span><br><span class="line">		</span><br><span class="line">		Iterator&lt;String&gt; iter = rq.iterator();</span><br><span class="line">		<span class="keyword">while</span>(iter.hasNext()) System.out.println(iter.next());</span><br><span class="line">		System.out.println();</span><br><span class="line">		Iterator&lt;String&gt; iter2 = rq.iterator();</span><br><span class="line">		<span class="keyword">while</span>(iter2.hasNext()) System.out.println(iter2.next());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="三-Permutation-1"><a href="#三-Permutation-1" class="headerlink" title="三. Permutation"></a>三. Permutation</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdIn;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdOut;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Permutation</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//jvm在调用主函数时,传入的是new args[0]</span></span><br><span class="line">		<span class="keyword">int</span> k = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">		RandomizedQueue rq = <span class="keyword">new</span> RandomizedQueue();</span><br><span class="line">		<span class="keyword">while</span>(!StdIn.isEmpty()) &#123;</span><br><span class="line">			rq.enqueue(StdIn.readString());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span>(rq.size()-k&gt;<span class="number">0</span>) rq.dequeue();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;k;i++) &#123;</span><br><span class="line">			StdOut.println(rq.dequeue());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>








      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/25/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E5%A4%A7%E5%AD%A6%E7%AE%97%E6%B3%95Week1-Percolation-%E6%B8%97%E9%80%8F-98%E5%88%86-%E6%80%BB%E7%BB%93%E5%8F%8A%E4%BB%A3%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/25/%E6%99%AE%E6%9E%97%E6%96%AF%E9%A1%BF%E5%A4%A7%E5%AD%A6%E7%AE%97%E6%B3%95Week1-Percolation-%E6%B8%97%E9%80%8F-98%E5%88%86-%E6%80%BB%E7%BB%93%E5%8F%8A%E4%BB%A3%E7%A0%81/" class="post-title-link" itemprop="url">普林斯顿大学算法Week1: Percolation 渗透(98分)--总结及代码</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-25 20:34:11" itemprop="dateCreated datePublished" datetime="2018-01-25T20:34:11+08:00">2018-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>视频讲述了并查集算法的细节,作业是该算法的实际应用  </p>
<ol>
<li><p>下载algs4.jar,并添加到CLASSPATH中</p>
</li>
<li><p>使用algs4.jar中的工具:求均值,求标准差,输入输出</p>
</li>
<li><p>需要传入外部参数的方法都得进行参数检测,否则扣分</p>
</li>
<li><p>UnionFind算法的输入是一维的,Percolation系统是n*n的格子,每个site由坐标对(x,y)表示,<br>所以要想描述点与点之间的关系,<strong>得先将二维坐标转换成一维的数值</strong>,我采用的转换规则是:(x,y)→x*(n+1)+y<br>(1,1)到(n,n) 对应n+2到n*(n+2),注意:一维数值并不是连续的<br>可以采用其它转换规则,比如易于理解的(x,y)→x*(n+2)+y,第5条有进一步的说明</p>
</li>
<li><p>之所以采用如上的转换规则:<br>其一,方便判断某个点的上下左右邻居时不会有数组越界异常,对于四周的site来说,并不都有四个邻点 <strong>(如下图3*3.png,左上角的点1没有上邻居和左邻居,扩充为5*5.png后,点1就有上下左右四个邻居了)</strong><br>其二,节省空间,最容易理解的是使用(n+2)*(n+2)长的一维数组(如下图3*3.png和5*5.png),使用(n+2)*(n+1)+1长的也行,因为在转换规则的约束下,所有site的一维表示都是唯一的,并且最大值等于(n+2)*(n+1)</p>
</li>
<li><p>要区分好block,open,full这三个状态,block对应false,open对应true,full表示某个site和上虚拟点相连</p>
</li>
<li><p>为方便判断系统为渗透状态,在n*n格子的上下分别加两个虚拟的点,<br>代码中:索引为0的代表上虚拟点,索引为(n+1)*(n+1)代表下虚拟点(找两个没用的索引值即可)<br>这样做会导致backwash问题(即回流问题),<strong>因为在open方法中第n行的所有site都和下虚拟点union过了</strong></p>
</li>
<li><p>解决backwash问题,需要再创建一个并查集对象,即代码中的uf2,该对象不将最后一行和下虚拟点相连,<strong>在isFull方法中使用uf2的connected方法</strong>就不会导致backwash问题了  </p>
<p> <img src="http://upload-images.jianshu.io/upload_images/9608551-6126573d8942fc3d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="3*3.png">  </p>
 <center>3\*3.png</center>

<p> <img src="http://upload-images.jianshu.io/upload_images/9608551-2806ebc04fe56cb8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="5*5.png">  </p>
 <center>5\*5.png</center>




</li>
</ol>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="Percalation-java"><a href="#Percalation-java" class="headerlink" title="Percalation.java"></a>Percalation.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Sasuke</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 25/1/2018</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdOut;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.WeightedQuickUnionUF;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Percolation</span> </span>&#123;</span><br><span class="line">   <span class="comment">// n*n grid</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> n ; </span><br><span class="line">   <span class="comment">//status of each site</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">boolean</span>[] eachStatus ; </span><br><span class="line">   <span class="comment">//number of open site</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> openNum;</span><br><span class="line">   <span class="comment">//UF alg with virtual site</span></span><br><span class="line">   <span class="keyword">private</span> WeightedQuickUnionUF uf1;</span><br><span class="line">   <span class="comment">//UF alg with only top site due to backwash</span></span><br><span class="line">   <span class="keyword">private</span> WeightedQuickUnionUF uf2;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// create n-by-n grid, with all sites blocked</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Percolation</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123; 	</span><br><span class="line">   	<span class="keyword">if</span>(n&lt;=<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"illegal value of n!"</span>);</span><br><span class="line">   	<span class="keyword">this</span>.n = n;</span><br><span class="line">   	<span class="comment">//plus two virtual site</span></span><br><span class="line">   	eachStatus = <span class="keyword">new</span> <span class="keyword">boolean</span>[(n+<span class="number">1</span>)*(n+<span class="number">2</span>)]; </span><br><span class="line">   	</span><br><span class="line">   	<span class="comment">//all sites are blocked</span></span><br><span class="line">   	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt; eachStatus.length;i++) eachStatus[i]=<span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">// grid with top site and bottom site</span></span><br><span class="line">   	uf1 = <span class="keyword">new</span> WeightedQuickUnionUF((n+<span class="number">1</span>)*(n+<span class="number">2</span>));</span><br><span class="line">    <span class="comment">// grid with only bottom site</span></span><br><span class="line">    uf2 = <span class="keyword">new</span> WeightedQuickUnionUF((n+<span class="number">1</span>)*(n+<span class="number">2</span>));</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//translate 2 dimentional coordinate to 1 dimentional pattern</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">oneDimention</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col)</span></span>&#123;</span><br><span class="line">   	<span class="keyword">return</span> row*(n+<span class="number">1</span>)+col;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// open site (row, col) if it is not open already</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col)</span></span>&#123;</span><br><span class="line">   	<span class="keyword">if</span>(row&lt;<span class="number">1</span> || row&gt;n || col&lt;<span class="number">1</span> || col&gt;n) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"illegal row or col!"</span>);</span><br><span class="line">   	<span class="keyword">if</span>(!isOpen(row,col)) &#123;</span><br><span class="line">   		eachStatus[oneDimention(row,col)]=<span class="keyword">true</span>;</span><br><span class="line">	   	openNum++;</span><br><span class="line">   		<span class="keyword">int</span> temp1 = oneDimention(row,col);</span><br><span class="line">	   	<span class="comment">//if neighbor could be connected?</span></span><br><span class="line">	   	<span class="keyword">if</span>(row==<span class="number">1</span>)&#123;</span><br><span class="line">	   		uf1.union(<span class="number">0</span>,temp1);</span><br><span class="line">	   		uf2.union(<span class="number">0</span>,temp1);</span><br><span class="line">	   	&#125;</span><br><span class="line">	   	<span class="keyword">if</span>(row==n) &#123; </span><br><span class="line">	   		uf1.union((n+<span class="number">1</span>)*(n+<span class="number">1</span>),temp1);</span><br><span class="line">	   	&#125;</span><br><span class="line">		<span class="keyword">int</span>[] dx = &#123;<span class="number">1</span>,-<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">		<span class="keyword">int</span>[] dy = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,-<span class="number">1</span>&#125;;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">			<span class="keyword">int</span> tempX = row+dx[i];</span><br><span class="line">			<span class="keyword">int</span> tempY = col+dy[i];</span><br><span class="line">			<span class="keyword">int</span> temp2 = oneDimention(tempX,tempY);</span><br><span class="line">			<span class="keyword">if</span> (eachStatus[temp2])&#123;</span><br><span class="line">				uf1.union(temp1,temp2);</span><br><span class="line">				uf2.union(temp1,temp2);</span><br><span class="line">			 &#125;</span><br><span class="line">	   		&#125;</span><br><span class="line">   	&#125;</span><br><span class="line">   &#125;    </span><br><span class="line"></span><br><span class="line">   <span class="comment">//is site (row, col) open?</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isOpen</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col)</span></span>&#123;</span><br><span class="line">   	   <span class="keyword">if</span>(row&lt;<span class="number">1</span> || row&gt;n || col&lt;<span class="number">1</span> || col&gt;n) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"illegal row or col!"</span>);</span><br><span class="line">	   <span class="keyword">return</span> eachStatus[oneDimention(row,col)];</span><br><span class="line">   &#125;  </span><br><span class="line"></span><br><span class="line">   <span class="comment">//is site (row, col) full?</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col)</span></span>&#123;</span><br><span class="line">   	<span class="keyword">if</span>(row&lt;<span class="number">1</span> || row&gt;n || col&lt;<span class="number">1</span> || col&gt;n) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"illegal row or col!"</span>);</span><br><span class="line">   	<span class="keyword">return</span> uf2.connected(<span class="number">0</span>,oneDimention(row,col));</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// number of open sites</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numberOfOpenSites</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> openNum;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// does the system percolate?</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">percolates</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> uf1.connected(<span class="number">0</span>,(n+<span class="number">1</span>)*(n+<span class="number">1</span>));</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// test client (optional)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	 Percolation p = <span class="keyword">new</span> Percolation(<span class="number">3</span>);</span><br><span class="line">     p.open(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">     p.open(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">     p.open(<span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line">     StdOut.println(p.isOpen(<span class="number">1</span>,<span class="number">1</span>));</span><br><span class="line">     StdOut.println(p.percolates());</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="PercolationStats-java"><a href="#PercolationStats-java" class="headerlink" title="PercolationStats.java"></a>PercolationStats.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Sasuke</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 25/1/2018</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdOut;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdRandom;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdStats;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PercolationStats</span> </span>&#123;</span><br><span class="line">	<span class="comment">//trial times</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> trialNum;</span><br><span class="line">	<span class="comment">//threshold P</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span>[] preP;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PercolationStats</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> trialNum)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (n&lt;<span class="number">1</span> || trialNum&lt;<span class="number">1</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal n or trialNum,please check"</span>);</span><br><span class="line">		<span class="keyword">this</span>.trialNum = trialNum;</span><br><span class="line">		preP = <span class="keyword">new</span> <span class="keyword">double</span>[trialNum];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;trialNum;i++) &#123;</span><br><span class="line">			Percolation p = <span class="keyword">new</span> Percolation(n);</span><br><span class="line">			<span class="keyword">while</span>(!p.percolates()) &#123;</span><br><span class="line">				<span class="keyword">int</span> row = StdRandom.uniform(n)+<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">int</span> col = StdRandom.uniform(n)+<span class="number">1</span>;</span><br><span class="line">				p.open(row,col);</span><br><span class="line">				<span class="keyword">if</span> (p.percolates()) <span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			preP[i] = (<span class="keyword">double</span>)p.numberOfOpenSites()/(n*n);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// mean of p</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">mean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> StdStats.mean(preP);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// standard deviation</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">stddev</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> StdStats.stddev(preP);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//confidence interval:low</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">confidenceLo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mean()-<span class="number">1.96</span>*stddev()/Math.sqrt(trialNum);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//confidence interval:high</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">confidenceHi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mean()+<span class="number">1.96</span>*stddev()/Math.sqrt(trialNum);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> n =<span class="number">10</span>,trialNum=<span class="number">1000</span>;</span><br><span class="line">		PercolationStats ps = <span class="keyword">new</span> PercolationStats(n,trialNum);</span><br><span class="line">		StdOut.println(<span class="string">"grid size :"</span> + n+<span class="string">"*"</span>+n);</span><br><span class="line">		StdOut.println(<span class="string">"trial times :"</span> + trialNum);</span><br><span class="line">		StdOut.println(<span class="string">"mean of p :"</span>+ ps.mean());</span><br><span class="line">		StdOut.println(<span class="string">"standard deviation :"</span>+ps.stddev());</span><br><span class="line">		StdOut.println(<span class="string">"confidence interval low :"</span>+ps.confidenceLo());</span><br><span class="line">		StdOut.println(<span class="string">"confidence interval high :"</span>+ps.confidenceHi());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/24/Google%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/24/Google%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/" class="post-title-link" itemprop="url">Google使用心得</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-24 12:30:33" itemprop="dateCreated datePublished" datetime="2018-01-24T12:30:33+08:00">2018-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li>Unsplash Instant: Chrome浏览器的一款插件,使用后每次打开chrome都会随机显示一张摄影师的作品,质量很高,喜欢的话还可以下载下来</li>
<li>Chrome浏览器可以搜索网页内的文本内容,对于不知道关键词在哪同时页面文字非常多时很有效,按Ctrl+F后输入关键词</li>
<li>谷歌云端硬盘: 可以上传本地文件夹至云端,并可实现实时同步,免费15G.有客户端并可以设置代理,使用方便</li>
<li>谷歌翻译: 非常厉害的翻译,可能跟谷歌拥有的庞大数据量有关系</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/23/%E8%81%94%E6%83%B3Y430P%E9%A2%9C%E8%89%B2%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Little Haes">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haes' Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/23/%E8%81%94%E6%83%B3Y430P%E9%A2%9C%E8%89%B2%E8%AE%BE%E7%BD%AE/" class="post-title-link" itemprop="url">联想Y430P颜色设置</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-23 16:04:53" itemprop="dateCreated datePublished" datetime="2018-01-23T16:04:53+08:00">2018-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-12-13 23:16:44" itemprop="dateModified" datetime="2019-12-13T23:16:44+08:00">2019-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>联想Y430P的屏幕色彩实在不敢恭维，粉色和紫色都不能好好区分····很可能错过一个极品装备<br>虽然迟早要换掉，但还是先用着吧，毕竟加了金士顿DDR3 1600 8G内存和三星 850EVO 250G固态，速度非常快<br>以下是颜色配置，在英特尔显卡控制面板里：<br>(饱和度可以根据具体情况改，我在显示器上用的是7)  </p>
<p><img src="http://upload-images.jianshu.io/upload_images/9608551-7567fa3e4cea8dfa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="color1.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/9608551-7316af5b0135692a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="color2.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Little Haes"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Little Haes</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">76</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/smallhaes" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;smallhaes" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:littlehaes@bupt.edu.cn" title="E-Mail → mailto:littlehaes@bupt.edu.cn" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/smallhaes" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;smallhaes" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://music.163.com/#/user/home?id=75165464" title="网易云 → https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;75165464" rel="noopener" target="_blank"><i class="fa fa-fw fa-cloud"></i>网易云</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/littlehaes" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;littlehaes" rel="noopener" target="_blank">CSDN</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Little Haes</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.1.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
